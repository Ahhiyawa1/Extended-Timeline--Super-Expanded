#################################
# Regional/Cultural Unification :
#################################
country_decisions = {

	unify_north_germany = {
		major = yes
		potential = {
			is_north_german_culture_trigger = yes
			post_napoleonic_age = yes
			NOT = { started_in = 3969.1.18 }
			NOT = { tag = WGE }
			NOT = { tag = EGE }
			NOT = {
				alias_exists = { tag = GER }
			}
			NOT = { exists = NGC }
			NOT = { has_country_flag = formed_north_germany_flag }
			NOT = { has_country_flag = formed_south_germany_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			region = north_german_region
			OR = {
				NOT = { country_or_subject_holds = ROOT }
				NOT = {
					owner = {
						is_german_culture_trigger = yes
					}
				}
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			north_german_region = {
				type = all
				country_or_subject_holds = ROOT
				owner = {
					is_german_culture_trigger = yes
				}
			}
			if = {
				limit = {
					is_or_was_tag = { tag = HAB }
				}
				custom_trigger_tooltip = {
					tooltip = unify_germany_austria
					NOT = {
						any_owned_province = {
							is_core = HUN
						}
					}
				}
			}
		}
		effect = {
			change_tag = NGC
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			north_german_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = NGC
			}
			south_german_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = NGC
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = NGC_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_north_germany_flag
			
			every_country = {
				limit = {
					capital_scope = {
						region = north_german_region
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_south_germany = {
		major = yes
		potential = {
			is_south_german_culture_trigger = yes
			post_napoleonic_age = yes
			NOT = { started_in = 3969.1.18 }
			NOT = { tag = WGE }
			NOT = { tag = EGE }
			NOT = {
				alias_exists = { tag = GER }
			}
			NOT = { exists = SGC }
			NOT = { has_country_flag = formed_north_germany_flag }
			NOT = { has_country_flag = formed_south_germany_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			region = south_german_region
			OR = {
				NOT = { country_or_subject_holds = ROOT }
				NOT = {
					owner = {
						is_german_culture_trigger = yes
					}
				}
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			south_german_region = {
				type = all
				country_or_subject_holds = ROOT
				owner = {
					is_german_culture_trigger = yes
				}
			}
			if = {
				limit = {
					is_or_was_tag = { tag = HAB }
				}
				custom_trigger_tooltip = {
					tooltip = unify_germany_austria
					NOT = {
						any_owned_province = {
							is_core = HUN
						}
					}
				}
			}
		}
		effect = {
			change_tag = SGC
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			north_german_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = SGC
			}
			south_german_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = SGC
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = SGC_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_south_germany_flag
			
			every_country = {
				limit = {
					capital_scope = {
						region = south_german_region
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_germany = {
		major = yes
		potential = {
			is_german_culture_trigger = yes
			post_napoleonic_age = yes
			NOT = { started_in = 3969.1.18 }
			NOT = { tag = WGE }
			NOT = { tag = EGE }
			NOT = {
				alias_exists = { tag = GER }
			}
			NOT = { has_country_flag = formed_germany_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				region = north_german_region
				region = south_german_region
			}
			OR = {
				NOT = { country_or_subject_holds = ROOT }
				NOT = {
					owner = {
						is_german_culture_trigger = yes
					}
				}
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			north_german_region = {
				type = all
				country_or_subject_holds = ROOT
				owner = {
					is_german_culture_trigger = yes
				}
			}
			south_german_region = {
				type = all
				country_or_subject_holds = ROOT
				owner = {
					is_german_culture_trigger = yes
				}
			}
			if = {
				limit = {
					is_or_was_tag = { tag = HAB }
				}
				custom_trigger_tooltip = {
					tooltip = unify_germany_austria
					NOT = {
						any_owned_province = {
							is_core = HUN
						}
					}
				}
			}
		}
		effect = {
			change_tag = GER
			on_change_tag_effect = yes
			swap_non_generic_missions = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = GER_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			country_event = { id = etf_event_ger.172 } # Germany Unified!
			set_country_flag = formed_germany_flag
			
			every_country = {
				limit = {
					capital_scope = {
						OR = {
							region = north_german_region
							region = south_german_region
						}
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
			hidden_effect = {
				dismantle_GCF_effect = yes
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_german_confederation = {
		major = yes
		potential = {
			has_global_flag = german_confederation_established
			is_GCF_leader = yes
			GCF = {
				check_variable = {
					which = member_count_GCF
					value = 5 # At least 5 members, no point in unifying if you're like the only member
				}
			}
			NOT = { exists = GCF }
		}
		provinces_to_highlight = {
			continent = europe
			owner = {
				is_GCF_member = yes
				NOT = { tag = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			GCF = {
				check_variable = {
					which = unity_GCF_var
					value = 100
				}
			}
		}
		effect = {
			custom_tooltip = unify_german_confederation_effect_tt
			country_event = { id = etf_event_ger.110 }
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	reunite_germany = {
		major = yes
		potential = {
			OR = {
				AND = {
					tag = WGE
					EGE = {
						ai = yes
						is_neighbor_of = ROOT
					}
				}
				AND = {
					tag = EGE
					WGE = {
						ai = yes
						is_neighbor_of = ROOT
					}
				}
			}
			started_in = 4043.5.8
			NOT = { has_global_flag = reunited_germany_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			owner = {
				OR = {
					tag = WGE
					tag = EGE
				}
				NOT = { tag = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			if = {
				limit = {
					OR = {
						AND = {
							tag = WGE
							exists = EGE
						}
						AND = {
							tag = EGE
							exists = WGE
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = reunite_germany_trigger_tt
					OR = {
						AND = {
							WGE = { has_reform = democracy_reform }
							EGE = { has_reform = democracy_reform }
						}
						AND = {
							WGE = { has_reform = communist_government }
							EGE = { has_reform = communist_government }
						}
						AND = {
							WGE = { has_reform = fascist_government }
							EGE = { has_reform = fascist_government }
						}
					}
				}
			}
			else = {
				if = {
					limit = {
						tag = WGE
					}
					owns_core_province = 50 # Berlin
				}
				if = {
					limit = {
						tag = EGE
					}
					owns_core_province = 85 # Bonn
				}
			}
		}
		effect = {
			if = {
				limit = {
					tag = WGE
					exists = EGE
				}
				inherit = EGE
				custom_tooltip = " "
			}
			else_if = {
				limit = {
					tag = EGE
					exists = WGE
				}
				inherit = WGE
				custom_tooltip = " "
			}
			change_tag = DEU
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			hidden_effect = { # Replace cores:
				WGE = {
					every_core_province = {
						add_core = DEU
						remove_core = WGE
					}
				}
				EGE = {
					every_core_province = {
						add_core = DEU
						remove_core = EGE
					}
				}
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = GER_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_germany_flag
			set_global_flag = reunited_germany_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_central_italy = {
		major = yes
		potential = {
			culture_group = latin
			capital_scope = {
				OR = {
					area = emilia_romagna_area
					area = tuscany_area
				}
			}
			has_country_flag = 1848_revolution_flag		# 1848 Revolution has happened...
			NOT = { has_disaster = 1848_revolution }	# ... and passed.
			NOT = {
				alias_exists = { tag = ITA }
			}
			NOT = { exists = ITC }
			NOT = { has_country_flag = formed_central_italy_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			owner = {
				capital_scope = {
					OR = {
						area = emilia_romagna_area
						area = tuscany_area
					}
				}
			}
			NOT = { owned_by = ROOT }
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			hidden_trigger = {
				if = {
					limit = {
						any_country = {
							ai = no
							capital_scope = {
								OR = {
									area = emilia_romagna_area
									area = tuscany_area
								}
							}
						}
					}
					ai = no
				}
			}
		}
		effect = {
			change_tag = ITC
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			emilia_romagna_area = {
				hidden_effect = {
					remove_claim = ITC
				}
				add_core = ITC
			}
			tuscany_area = {
				hidden_effect = {
					remove_claim = ITC
				}
				add_core = ITC
			}
			hidden_effect = {
				if = {
					limit = {
						is_subject = yes
					}
					if = {
						limit = {
							overlord = {
								dynasty = ITC
							}
						}
						# New ruling family
						remove_heir = {}
						define_ruler = {}
					}
					grant_independence = yes
				}
			}
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = latin_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_central_italy_flag
			
			every_country = {
				limit = {
					OR = {
						is_free_or_tributary_trigger = yes
						is_subject_of = ROOT
						overlord = {
							is_subject_of = ROOT
						}
					}
					culture_group = latin
					capital_scope = {
						OR = {
							area = emilia_romagna_area
							area = tuscany_area
						}
					}
					NOT = { tag = PAP }
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				overlord = {
					dynasty = ROOT
				}
			}
		}
		ai_importance = 400
	}

	unify_italy = {
		major = yes
		potential = {
			culture_group = latin
			capital_scope = {
				continent = europe
			}
			post_napoleonic_age = yes
			NOT = { started_in = 3959.3.17 }
			NOT = {
				alias_exists = { tag = ITA }
			}
			NOT = { has_country_flag = formed_italy_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			owner = {
				culture_group = latin
				capital_scope = {
					region = italy_region
				}
			}
			NOT = { country_or_subject_holds = ROOT }
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			custom_trigger_tooltip = {
				tooltip = unify_italy_trigger_tt
				NOT = {
					any_country = {
						culture_group = latin
						capital_scope = {
							region = italy_region
						}
						NOT = { tag = ROOT }
						NOT = {
							OR = {
								is_subject_of = ROOT
								AND = {
									tag = PAP # OPM Pope
									all_owned_province = {
										province_id = 118
									}
								}
							}
						}
					}
				}
			}
		}
		effect = {
			change_tag = ITA
			on_change_tag_effect = yes
			swap_non_generic_missions = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			if = {
				limit = {
					owns = 118
				}
				set_capital = 118 # Rome
			}
			else_if = {
				limit = {
					owns = 116
				}
				set_capital = 116 # Firenze
			}
			italy_region = { # Cores! With exceptions...
				limit = {
					OR = {
						AND = {
							province_id = 126 # Malta
							NOT = {
								owner = {
									country_is = { tag = GBR }
								}
							}
						}
						AND = {
							province_id = 1247 # Corsica
							NOT = {
								owner = {
									country_is = { tag = FRA }
								}
							}
						}
						AND = {
							province_id = 4740 # Ticino
							NOT = {
								is_core = SWI
							}
						}
						AND = {
							NOT = { province_id = 126 }
							NOT = { province_id = 1247 }
							NOT = { province_id = 4740 }
						}
					}
				}
				add_core = ITA
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = ITA_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			country_event = { id = etf_event_ita.400 } # Risorgimento
			set_country_flag = formed_italy_flag
			
			every_country = {
				limit = {
					OR = {
						is_free_or_tributary_trigger = yes
						is_subject_of = ROOT
						overlord = {
							is_subject_of = ROOT
						}
					}
					culture_group = latin
					capital_scope = {
						region = italy_region
					}
					NOT = { tag = PAP } # Annexed via separate event
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_scandinavia = {
		major = yes
		potential = {
			culture_group = scandinavian
			capital_scope = {
				region = scandinavia_region
			}
			post_napoleonic_age = yes
			NOT = { exists = SCA }
			NOT = { has_country_flag = formed_scandinavia_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			culture_group = scandinavian
			region = scandinavia_region
			OR = {
				NOT = { country_or_subject_holds = ROOT }
				NOT = {
					owner = {
						culture_group = scandinavian
					}
				}
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			custom_trigger_tooltip = {
				tooltip = unify_scandinavia_trigger_tt
				scandinavia_region = {
					type = all
					OR = {
						AND = {
							country_or_subject_holds = ROOT
							owner = {
								culture_group = scandinavian
							}
						}
						NOT = { culture_group = scandinavian }
					}
				}
			}
		}
		effect = {
			change_tag = SCA
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			scandinavia_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = SCA
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = SCA_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_scandinavia_flag
			
			every_country = {
				limit = {
					OR = {
						is_free_or_tributary_trigger = yes
						is_subject_of = ROOT
						overlord = {
							is_subject_of = ROOT
						}
					}
					culture_group = scandinavian
					capital_scope = {
						region = scandinavia_region
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_switzerland = {
		major = yes
		potential = {
			culture_group = swiss_group
			capital_scope = {
				continent = europe
			}
			post_napoleonic_age = yes
			NOT = { exists = SWI }
			NOT = { has_country_flag = formed_switzerland_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			owner = {
				culture_group = swiss_group
				capital_scope = {
					continent = europe
				}
			}
			NOT = { owned_by = ROOT }
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			OR = {
				is_institution_enabled = nationalism_institution
				custom_trigger_tooltip = {
					tooltip = unify_switzerland_trigger_tt_1
					has_country_flag = switzerland_leader
					has_global_flag = swiss_federal_treaty
				}
			}
			OR = {
				has_country_modifier = religious_freedom_modifier
				religion = secularism
			}
			if = {
				limit = {
					NOT = { has_country_flag = switzerland_leader }
				}
				custom_trigger_tooltip = {
					tooltip = unify_switzerland_trigger_tt_2
					NOT = { # Needs to be the most developed Canton.
						any_country = {
							culture_group = swiss_group
							capital_scope = {
								continent = europe
							}
							total_development = ROOT
							NOT = { tag = ROOT }
						}
					}
				}
			}
			hidden_trigger = {
				OR = {
					ai = no
					NOT = {
						any_country = {
							ai = no
							culture_group = swiss_group
							capital_scope = {
								continent = europe
							}
						}
					}
				}
			}
		}
		effect = {
			change_tag = SWI
			on_change_tag_effect = yes
			swap_non_generic_missions = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			if = {
				limit = {
					NOT = { accepted_culture = german_swiss }
				}
				add_accepted_culture = german_swiss
			}
			if = {
				limit = {
					NOT = { accepted_culture = french_swiss }
				}
				add_accepted_culture = french_swiss
			}
			if = {
				limit = {
					NOT = { accepted_culture = italian_swiss }
				}
				add_accepted_culture = italian_swiss
			}
			if = {
				limit = {
					NOT = { accepted_culture = romansh }
				}
				add_accepted_culture = romansh
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = SWI_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_switzerland_flag
			
			every_country = {
				limit = {
					OR = {
						is_free_or_tributary_trigger = yes
						is_subject_of_type = swiss_canton_subject#
						is_subject_of = ROOT
						overlord = {
							is_subject_of = ROOT
						}
					}
					culture_group = swiss_group
					capital_scope = {
						continent = europe
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_iberia = {
		major = yes
		potential = {
			culture_group = iberian
			capital_scope = {
				region = iberia_region
			}
			post_napoleonic_age = yes
			NOT = { exists = IBU }
			NOT = { has_country_flag = formed_iberia_flag }
			
			country_formation_potential_trigger = {
				allow_end_game_tag = "country_is = { tag = SPA }"
			}
		}
		provinces_to_highlight = {
			region = iberia_region
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				NOT = {
					owner = {
						culture_group = iberian
						capital_scope = {
							region = iberia_region
						}
					}
				}
			}
			NOT = { province_id = 197 }
			NOT = { province_id = 226 }
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			iberia_region = {
				type = all
				OR = {
					AND = {
						country_or_non_sovereign_subject_holds = ROOT
						owner = {
							culture_group = iberian
							capital_scope = {
								region = iberia_region
							}
						}
					}
					province_id = 197	# North Catalonia (French)
					province_id = 226	# Gibraltar (British)
				}
			}
		}
		effect = {
			change_tag = IBU
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			iberia_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = IBU
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = IBU_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_iberia_flag
			
			every_country = {
				limit = {
					OR = {
						is_free_or_tributary_trigger = yes
						is_subject_of = ROOT
						overlord = {
							is_subject_of = ROOT
						}
					}
					culture_group = iberian
					capital_scope = {
						region = iberia_region
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_caribbean = {
		major = yes
		potential = {
			capital_scope = {
				region = carribeans_region
			}
			post_napoleonic_age = yes
			NOT = { exists = WSI }
			NOT = { has_country_flag = formed_caribbean_flag }
			
			colonial_country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			region = carribeans_region
			NOT = { country_or_subject_holds = ROOT }
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			custom_trigger_tooltip = {
				tooltip = unify_caribbean_trigger_tt
				carribeans_region = {
					type = all
					country_or_subject_holds = ROOT
				}
			}
		}
		effect = {
			change_tag = WSI
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			carribeans_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = WSI
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = WSI_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_caribbean_flag
			set_country_flag = changed_from_colonial_nation
			
			every_country = {
				limit = {
					OR = {
						is_free_or_tributary_trigger = yes
						is_subject_of = ROOT
						overlord = {
							is_subject_of = ROOT
						}
					}
					capital_scope = {
						region = carribeans_region
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_gran_colombia = {
		major = yes
		potential = {
			primary_culture = iberian_colombian
			capital_scope = {
				region = colombia_region
			}
			post_napoleonic_age = yes
			NOT = { exists = GCO }
			NOT = { has_country_flag = formed_gran_colombia_flag }
			
			colonial_country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			culture = iberian_colombian
			region = colombia_region
			NOT = { country_or_subject_holds = ROOT }
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			custom_trigger_tooltip = {
				tooltip = unify_gran_colombia_trigger_tt
				colombia_region = {
					type = all
					OR = {
						country_or_subject_holds = ROOT
						NOT = { culture = iberian_colombian }
					}
				}
			}
		}
		effect = {
			change_tag = GCO
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			colombia_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = GCO
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = GCO_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_gran_colombia_flag
			set_country_flag = changed_from_colonial_nation
			
			every_country = {
				limit = {
					OR = {
						is_free_or_tributary_trigger = yes
						is_subject_of = ROOT
						overlord = {
							is_subject_of = ROOT
						}
					}
					primary_culture = iberian_colombian
					capital_scope = {
						region = colombia_region
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	#unify_colonial_australia = {
	#	major = yes
	#	potential = {
	#		OR = {
	#			tag = QLD
	#			tag = NSW
	#			tag = VIC
	#			tag = TAS
	#			tag = SSA
	#			tag = WAU
	#			tag = NTE
	#		}
	#		capital_scope = {
	#			region = australia_region
	#		}
	#		post_napoleonic_age = yes
	#		NOT = { started_in = 3999.1.1 }
	#		NOT = {
	#			alias_exists = { tag = AUS }
	#		}
	#		NOT = { has_country_flag = formed_australia_flag }
	#
	#		normal_or_historical_nations = yes
	#		was_never_end_game_tag_trigger = yes
	#		OR = {
	#			ai = no
	#			is_playing_custom_nation = no
	#		}
	#		is_colonial_nation = no
	#		#OR = {
	#		#	is_former_colonial_nation = no
	#		#	AND = {
	#		#		is_former_colonial_nation = yes
	#		#		ai = no
	#		#	}
	#		#}
	#	}
	#	provinces_to_highlight = {
	#		OR = {
	#			AND = {
	#				region = australia_region
	#				owner = {
	#					NOT = {
	#						OR = {
	#							tag = QLD
	#							tag = NSW
	#							tag = VIC
	#							tag = TAS
	#							tag = SSA
	#							tag = WAU
	#							tag = NTE
	#							overlord_of = ROOT
	#						}
	#					}
	#				}
	#			}
	#			AND = {
	#				owner = {
	#					capital_scope = {
	#						region = australia_region
	#					}
	#					NOT = {
	#						has_opinion = {
	#							who = ROOT
	#							value = 100
	#						}
	#					}
	#					NOT = { tag = ROOT }
	#				}
	#			}
	#		}
	#	}
	#	allow = {
	#		is_at_war = no
	#		custom_trigger_tooltip = {
	#			tooltip = unify_colonial_australia_trigger_1_tt
	#			australia_region = {
	#				type = all
	#				owner = {
	#					OR = {
	#						tag = QLD
	#						tag = NSW
	#						tag = VIC
	#						tag = TAS
	#						tag = SSA
	#						tag = WAU
	#						tag = NTE
	#						overlord_of = ROOT
	#					}
	#				}
	#			}
	#		}
	#		custom_trigger_tooltip = {
	#			tooltip = unify_colonial_australia_trigger_2_tt
	#			all_country = {
	#				if = {
	#					limit = {
	#						capital_scope = {
	#							region = australia_region
	#						}
	#						NOT = { tag = ROOT }
	#					}
	#					OR = {
	#						has_opinion = {
	#							who = ROOT
	#							value = 100
	#						}
	#						AND = {
	#							ROOT = { ai = yes }
	#							ai = yes
	#							is_year = 3999
	#						}
	#					}
	#				}
	#			}
	#		}
	#	}
	#	effect = {
	#		hidden_effect = {
	#			# Provinces owned by overlord in Australia are ceded:
	#			if = {
	#				limit = {
	#					is_subject = yes
	#				}
	#				australia_region = {
	#					limit = {
	#						owner = {
	#							overlord_of = ROOT
	#						}
	#					}
	#					remove_core = owner
	#					add_core = ROOT
	#					cede_province = ROOT
	#				}
	#			}
	#		}
	#		change_tag = AUS
	#		on_change_tag_effect = yes
	#		if = {
	#			limit = {
	#				NOT = { government_rank = 2 }
	#			}
	#			set_government_rank = 2
	#		}
	#		add_country_modifier = {
	#			name = "centralization_modifier"
	#			duration = 7300
	#		}
	#		add_prestige = 25
	#		if = {
	#			limit = { has_custom_ideas = no }
	#			country_event = { id = ideagroups.1 } #Swap Ideas
	#		}
	#		set_country_flag = formed_australia_flag
	#		set_country_flag = changed_from_colonial_nation
	#		
	#		every_country = {
	#			limit = {
	#				capital_scope = {
	#					region = australia_region
	#				}
	#				NOT = { tag = ROOT }
	#			}
	#			country_event = { id = etf_annexation.1 }
	#		}
	#	}
	#	ai_will_do = {
	#		factor = 1
	#		modifier = {
	#			factor = 0
	#			# If NSW exists, they should lead the unification.
	#			exists = NSW
	#			NOT = { tag = NSW }
	#		}
	#	}
	#	ai_importance = 400
	#}

	unify_maori_new_zealand = {
		major = yes
		potential = {
			primary_culture = maori
			capital_scope = {
				new_zealand_trigger = yes
			}
			overlord = {
				country_is = { tag = GBR }
			}
			any_country = {
				primary_culture = maori
				capital_scope = {
					new_zealand_trigger = yes
				}
				NOT = { tag = ROOT }
			}
			NOT = { exists = UNZ }
			NOT = { has_country_flag = formed_united_tribes_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			new_zealand_trigger = yes
			owner = {
				primary_culture = maori
				capital_scope = {
					new_zealand_trigger = yes
				}
				NOT = { tag = ROOT }
				NOT = {
					is_subject_of = ROOT
					AND = {
						alliance_with = ROOT
						has_opinion = {
							who = ROOT
							value = 150
						}
					}
				}
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			custom_trigger_tooltip = {
				tooltip = unify_maori_new_zealand_tt
				all_country = {
					if = {
						limit = {
							primary_culture = maori
							capital_scope = {
								new_zealand_trigger = yes
							}
							NOT = { tag = ROOT }
						}
						OR = {
							is_subject_of = ROOT
							AND = {
								alliance_with = ROOT
								has_opinion = {
									who = ROOT
									value = 150
								}
							}
						}
					}
				}
			}
		}
		effect = {
			change_tag = UNZ
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			te_ika_a_maui_hauauru_area = {
				hidden_effect = {
					remove_claim = UNZ
				}
				add_core = UNZ
			}
			te_ika_a_maui_waho_area = {
				hidden_effect = {
					remove_claim = UNZ
				}
				add_core = UNZ
			}
			te_waipounamu_area = {
				hidden_effect = {
					remove_claim = UNZ
				}
				add_core = UNZ
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = UNZ_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_united_tribes_flag
			
			every_country = {
				limit = {
					primary_culture = maori
					capital_scope = {
						new_zealand_trigger = yes
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_commonwealth_of_nations = {
		major = yes
		potential = {
			OR = {
				country_is = { tag = GBR }
				country_is = { tag = CAN }
				country_is = { tag = RSA }
				country_is = { tag = AUS }
				country_is = { tag = NZL }
				country_is = { tag = INI }
				has_country_flag = dominion_of_GBR
				has_country_flag = dominion_of_UKI
			}
			started_in = 4048.1.1
			NOT = { exists = CMN }
			NOT = { has_country_flag = formed_commonwealth_of_nations_flag }
			
			colonial_country_formation_potential_trigger = {
				allow_end_game_tag = "always = yes"
			}
		}
		provinces_to_highlight = {
			OR = {
				province_id = 236	# London
				province_id = 4892	# Ottawa
				province_id = 4781	# Pretoria
				province_id = 4859	# Canberra
				province_id = 1107	# Wellington
				province_id = 522	# Delhi
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_or_non_sovereign_subject_of = 236	# London
			owns_or_non_sovereign_subject_of = 4892	# Ottawa
			owns_or_non_sovereign_subject_of = 4781	# Pretoria
			owns_or_non_sovereign_subject_of = 4859	# Canberra
			owns_or_non_sovereign_subject_of = 1107	# Wellington
			owns_or_non_sovereign_subject_of = 522	# Delhi
		}
		effect = {
			change_tag = CMN
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = CMN_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_commonwealth_of_nations_flag
			set_country_flag = no_colonial_nations
			
			every_country = {
				limit = {
					OR = {
						is_free_or_tributary_trigger = yes
						is_subject_of = ROOT
						overlord = {
							is_subject_of = ROOT
						}
					}
					OR = {
						country_is = { tag = GBR }
						country_is = { tag = CAN }
						country_is = { tag = RSA }
						country_is = { tag = AUS }
						country_is = { tag = NZL }
						country_is = { tag = INI }
						has_country_flag = dominion_of_GBR
						has_country_flag = dominion_of_UKI
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_cis = {
		major = yes
		potential = {
			country_is = { tag = RUS }
			started_in = 4089.12.25
			NOT = { exists = CIS }
			NOT = { has_country_flag = formed_cis_flag }
			
			colonial_country_formation_potential_trigger = {
				allow_end_game_tag = "always = yes"
			}
		}
		provinces_to_highlight = {
			owner = {
				has_country_modifier = post_soviet_modifier
				NOT = { tag = ROOT }
				NOT = {
					OR = {
						is_subject_of = ROOT
						AND = {
							alliance_with = ROOT
							has_opinion = {
								who = ROOT
								value = 150
							}
						}
					}
				}
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			custom_trigger_tooltip = {
				tooltip = unify_cis_tt
				all_country = {
					if = {
						limit = {
							has_country_modifier = post_soviet_modifier
							NOT = { tag = ROOT }
						}
						OR = {
							is_subject_of = ROOT
							AND = {
								alliance_with = ROOT
								has_opinion = {
									who = ROOT
									value = 150
								}
							}
						}
					}
				}
			}
		}
		effect = {
			change_tag = CIS
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = CIS_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_cis_flag
			
			every_country = {
				limit = {
					has_country_modifier = post_soviet_modifier
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	unify_united_nations = {
		major = yes
		potential = {
			ai = no
			NOT = {
				any_country = {
					ai = no
					NOT = { tag = ROOT }
				}
			}
			NOT = { # Complete world domination!
				any_country = {
					NOT = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
							overlord = {
								is_subject_of = ROOT
							}
						}
					}
				}
			}
			NOT = { exists = UNI }
			NOT = { has_country_flag = formed_united_nations_flag }
			
			colonial_country_formation_potential_trigger = {
				allow_end_game_tag = "always = yes"
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
		}
		effect = {
			change_tag = UNI
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			if = {
				limit = {
					965 = {
						owned_by = UNI
						NOT = { is_capital_of = UNI }
					}
				}
				set_capital = 965 # New York
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 100
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = UNI_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_united_nations_flag
			
			every_country = {
				limit = {
					exists = yes
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

}

###############
# Form Nation :
###############
country_decisions = {

	form_united_kingdom = {
		major = yes
		potential = {
			tag = GBR
			government = monarchy
			adm_tech = 74 # Around 1790
			NOT = { exists = UKI }
			NOT = { has_country_flag = formed_united_kingdom_flag }
			
			country_formation_potential_trigger = {
				allow_end_game_tag = "always = yes"
			}
		}
		provinces_to_highlight = {
			OR = {
				area = munster_area
				area = connacht_area
				area = leinster_area
				area = ulster_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			government_rank = 2
			munster_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			connacht_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			leinster_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			ulster_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			change_tag = UKI
			on_change_tag_effect = yes
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 10
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = UKI_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_united_kingdom_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_july_monarchy = { # Change to the Tricolor
		major = yes
		potential = {
			tag = FRA
			government = monarchy
			is_revolutionary = no
			OR = {
				years_since_dismantle_revolution = 15
				started_in = 3928.7.26
			}
			NOT = { exists = FR2 }
			NOT = { has_country_flag = adopted_tricolor_flag }
			
			country_formation_potential_trigger = {
				allow_end_game_tag = "always = yes"
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
		}
		effect = {
			change_tag = FR2
			on_change_tag_effect = yes
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 10
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = FR2_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = adopted_tricolor_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				dynasty = "de Bourbon"
			}
			modifier = {
				factor = 0
				is_autocracy = yes
			}
		}
		ai_importance = 400
	}

	form_sweden_norway = {
		major = yes
		potential = {
			country_is = { tag = SWE }
			government = monarchy
			any_subject_country = {
				tag = SNO # Swedish Norway
			}
			NOT = { exists = SWN }
			NOT = { has_country_flag = formed_sweden_norway_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			is_capital_of = SNO
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			any_subject_country = {
				tag = SNO
				government = monarchy
				has_reform = authoritarian_rule
			}
		}
		effect = {
			change_tag = SWN
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 10
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = SWN_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_sweden_norway_flag
			
			SNO = {
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_united_baltics = {
		major = yes
		potential = {
			OR = {
				primary_culture = estonian
				culture_group = baltic
				AND = {
					OR = {
						primary_culture = prussian
						primary_culture = baltic_german
					}
					capital_scope = {
						region = baltic_region
					}
				}
			}
			adm_tech = 74
			NOT = { exists = BLP }
			NOT = { has_country_flag = formed_united_baltics_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 36 	# Estland
				province_id = 1834 	# Dorpat
				province_id = 38 	# Riga
				province_id = 39 	# Kurland
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 36 	# Estland
			owns_core_province = 1834 	# Dorpat
			owns_core_province = 38 	# Riga
			owns_core_province = 39 	# Kurland
		}
		effect = {
			change_tag = BLP
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = BLP_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_united_baltics_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_baden_wurttemberg = {
		major = yes
		potential = {
			OR = {
				primary_culture = swabian
				primary_culture = swiss
			}
			was_never_german_regional_tag_trigger = yes
			adm_tech = 74
			NOT = { exists = BAW }
			NOT = { has_country_flag = formed_baden_wurttemberg_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 70	# Stuttgart
				province_id = 74	# Baden
				province_id = 77	# Heidelberg
				province_id = 1872	# Ulm
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 70		# Stuttgart
			owns_core_province = 74		# Baden
			owns_core_province = 77		# Heidelberg
			owns_core_province = 1872	# Ulm
		}
		effect = {
			change_tag = BAW
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = BAW_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_baden_wurttemberg_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_austria_hungary = {
		major = yes
		potential = {
			OR = {
				country_is = { tag = HAB }
				country_is = { tag = HUN }
			}
			government = monarchy
			adm_tech = 80
			NOT = { exists = AUH }
			NOT = { has_country_flag = formed_austria_hungary_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			if = {
				limit = {
					ROOT = {
						country_is = { tag = HAB }
					}
				}
				OR = {
					area = transdanubia_area
					area = alfold_area
				}
			}
			else_if = {
				limit = {
					ROOT = {
						country_is = { tag = HUN }
					}
				}
				OR = {
					area = tirol_area
					area = austria_proper_area
					area = inner_austria_area
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			if = {
				limit = {
					country_is = { tag = HAB }
				}
				transdanubia_area = {
					type = all
					owned_by = ROOT
					is_core = ROOT
				}
				alfold_area = {
					type = all
					owned_by = ROOT
					is_core = ROOT
				}
				NOT = { exists = HUN }
			}
			else_if = {
				limit = {
					country_is = { tag = HUN }
				}
				tirol_area = {
					type = all
					owned_by = ROOT
					is_core = ROOT
				}
				austria_proper_area = {
					type = all
					owned_by = ROOT
					is_core = ROOT
				}
				inner_austria_area = {
					type = all
					owned_by = ROOT
					is_core = ROOT
				}
				NOT = { exists = HAB }
			}
		}
		effect = {
			if = {
				limit = {
					culture_group = germanic
					NOT = {
						any_country = {
							country_is = { tag = GER }
						}
					}
				}
				custom_tooltip = form_austria_hungary_tooltip # "Austria-Hungary cannot unify Germany" warning
			}
			change_tag = AUH
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			if = {
				limit = {
					NOT = { accepted_culture = austrian }
				}
				add_accepted_culture = austrian
			}
			if = {
				limit = {
					NOT = { accepted_culture = hungarian }
				}
				add_accepted_culture = hungarian
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = AUH_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_austria_hungary_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				is_GCF_member = yes
			}
		}
		ai_importance = 400
	}

	form_united_principalities = {
		major = yes
		potential = {
			OR = {
				tag = WAL
				tag = MOL
			}
			primary_culture = romanian
			adm_tech = 73
			NOT = { exists = UPP }
			NOT = { exists = RMN }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				AND = {
					exists = MOL
					NOT = {
						ROOT = { tag = MOL }
					}
					owned_by = MOL
				}
				AND = {
					OR = {
						NOT = { exists = MOL }
						ROOT = { tag = MOL }
					}
					province_id = 4529 # Iasi
					OR = {
						NOT = { owned_by = ROOT }
						NOT = { is_core = ROOT }
					}
				}
				AND = {
					exists = WAL
					NOT = {
						ROOT = { tag = WAL }
					}
					owned_by = WAL
				}
				AND = {
					OR = {
						NOT = { exists = WAL }
						ROOT = { tag = WAL }
					}
					province_id = 4531 # Bucharest
					OR = {
						NOT = { owned_by = ROOT }
						NOT = { is_core = ROOT }
					}
				}
			}
		}
		allow = {
			is_at_war = no
			# Can be formed as subject!
			if = {
				limit = {
					exists = MOL
					NOT = { tag = MOL }
				}
				overlord_of = MOL
			}
			else = {
				owns_core_province = 4529 # Iasi
			}
			if = {
				limit = {
					exists = WAL
					NOT = { tag = WAL }
				}
				overlord_of = WAL
			}
			else = {
				owns_core_province = 4531 # Bucharest
			}
		}
		effect = {
			trigger_switch = {
				on_trigger = tag
				WAL = {
					if = {
						limit = {
							exists = MOL
						}
						annex_tag = {
							target = MOL
							transfer_cores = yes
							delete_cores = yes
						}
					}
					else = {
						hidden_effect = {
							every_province = {
								limit = {
									is_core = MOL
								}
								add_core = ROOT
								remove_core = MOL
							}
						}
					}
				}
				MOL = {
					if = {
						limit = {
							exists = WAL
						}
						annex_tag = {
							target = WAL
							transfer_cores = yes
							delete_cores = yes
						}
					}
					else = {
						hidden_effect = {
							every_province = {
								limit = {
									is_core = WAL
								}
								add_core = ROOT
								remove_core = WAL
							}
						}
					}
				}
			}
			change_tag = UPP
			on_change_tag_effect = yes
			if = {
				limit = {
					owns_core_province = 4531
					NOT = { capital = 4531 }
				}
				set_capital = 4531 # Bucharest
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 10
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = UPP_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_romania_alt = {
		major = yes
		potential = {
			tag = UPP
			primary_culture = romanian
			adm_tech = 73
			NOT = { exists = RMN }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 4529	# Iasi
				province_id = 4531	# Bucharest
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 4529	# Iasi
			owns_core_province = 4531	# Bucharest
		}
		effect = {
			change_tag = RMN
			on_change_tag_effect = yes
			swap_non_generic_missions = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			transylvania_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { province_id = 1952 } # West Ruthenia
				}
				hidden_effect = {
					remove_claim = ROOT
				}
				add_core = RMN
			}
			southern_transylvania_area = {
				limit = {
					NOT = { is_core = ROOT }
				}
				hidden_effect = {
					remove_claim = ROOT
				}
				add_core = RMN
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = RMN_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_romania_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_bosnia_herzegovina = {
		major = yes
		potential = {
			primary_culture = bosnian
			adm_tech = 74
			NOT = { exists = BHE }
			NOT = { has_country_flag = formed_bosnia_herzegovina_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 140	# Bosnia
				province_id = 3002	# Sarajevo
				province_id = 1831	# Travunia
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 140	# Bosnia
			owns_core_province = 3002	# Sarajevo
			owns_core_province = 1831	# Travunia
			OR = {
				tag = BOS
				NOT = { exists = BOS }
			}
			OR = {
				tag = HRZ
				NOT = { exists = HRZ }
			}
		}
		effect = {
			change_tag = BHE
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 10
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = BOS_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_bosnia_herzegovina_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_novorossiya = {
		major = yes
		potential = {
			primary_culture = russian
			capital_scope = {
				region = crimea_region
			}
			NOT = { exists = NRS }
			NOT = { has_country_flag = formed_novorossiya_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				area = zaporizhia_area
				area = yedisan_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			zaporizhia_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			yedisan_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			change_tag = NRS
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			crimea_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = NRS
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = NRS_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_novorossiya_flag
			
			every_country = {
				limit = {
					OR = {
						tag = DTK
						tag = LUH
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_malta = {
		major = yes
		potential = {
			capital_scope = {
				province_id = 126 # Malta
			}
			adm_tech = 74
			NOT = { exists = JAI }
			NOT = { has_country_flag = formed_malta_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			province_id = 126 # Malta
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 126 # Malta
			NOT = { num_of_cities = 3 } # 2 or less
		}
		effect = {
			change_tag = JAI
			on_change_tag_effect = yes
			if = {
				limit = {
					126 = { # Malta is Maltese
						culture = maltese
					}
				}
				change_primary_culture = maltese
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 10
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = latin_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_malta_flag
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				government = theocracy # The Knights
			}
		}
		ai_importance = 400
	}

	form_mexican_empire = {
		major = yes
		potential = {
			country_is = { tag = MEX }
			NOT = { exists = MXE }
			NOT = { has_country_flag = formed_mexican_empire_flag }
			
			colonial_country_formation_potential_trigger = {
				allow_end_game_tag = "always = yes"
			}
		}
		provinces_to_highlight = {
			OR = {
				province_id = 852	# Mexico City
				province_id = 4627	# Austin
				province_id = 4637	# San Francisco
				AND = {
					colonial_region = colonial_mexico
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								is_core = ROOT
								colonial_region = colonial_mexico
								value = 50
							}
						}
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 852	# Mexico City
			owns_core_province = 4627	# Austin
			owns_core_province = 4637	# San Francisco
			num_of_owned_provinces_with = {
				is_core = ROOT
				colonial_region = colonial_mexico
				value = 50
			}
			OR = {
				government = monarchy
				faction_in_power = conservative_party
				faction_in_power = nationalist_party
				faction_in_power = national_socialist_party
			}
		}
		effect = {
			change_tag = MXE
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government = monarchy }
				}
				change_government = monarchy
			}
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			california_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = MXE
			}
			rio_grande_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = MXE
			}
			mexico_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = MXE
			}
			central_america_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = MXE
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = MXE_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_mexican_empire_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_peru_bolivia = {
		major = yes
		potential = {
			primary_culture = iberian_peruvian
			NOT = { exists = PBO }
			NOT = { has_country_flag = formed_peru_bolivia_flag }
			
			colonial_country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 809	# Lima
				province_id = 802	# La Paz
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 809	# Lima
			owns_core_province = 802	# La Paz
			OR = {
				tag = PEU
				NOT = { exists = PEU }
			}
			OR = {
				tag = NPE
				NOT = { exists = NPE }
			}
			OR = {
				tag = SPE
				NOT = { exists = SPE }
			}
			OR = {
				tag = BOL
				NOT = { exists = BOL }
			}
		}
		effect = {
			change_tag = PBO
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			peru_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = PBO
			}
			upper_peru_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = PBO
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = PBO_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_peru_bolivia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_portugal_brazil = {
		major = yes
		potential = {
			OR = {
				primary_culture = portugese
				primary_culture = brazilian
			}
			has_discovered = 763 # Rio de Janeiro, decision is hidden until discovered.
			NOT = { exists = POB }
			NOT = { has_country_flag = formed_portugal_brazil_flag }
			
			colonial_country_formation_potential_trigger = {
				allow_end_game_tag = "country_is = { tag = BRZ }"
			}
		}
		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 227 # Lisboa
					NOT = {
						AND = {
							country_or_non_sovereign_subject_holds = ROOT
							owner = {
								is_colonial_nation = no
								OR = {
									primary_culture = portugese
									primary_culture = brazilian
								}
							}
						}
					}
				}
				AND = {
					OR = {
						area = beieras_area
						area = alentejo_area
					}
					NOT = {
						owner = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								OR = {
									area = beieras_area
									area = alentejo_area
								}
								owner = {
									is_colonial_nation = no
									OR = {
										primary_culture = portugese
										primary_culture = brazilian
									}
								}
								value = 5
							}
						}
					}
					NOT = {
						AND = {
							country_or_non_sovereign_subject_holds = ROOT
							owner = {
								is_colonial_nation = no
								OR = {
									primary_culture = portugese
									primary_culture = brazilian
								}
							}
						}
					}
				}
				AND = {
					province_id = 763 # Rio de Janeiro
					NOT = {
						AND = {
							country_or_non_sovereign_subject_holds = ROOT
							owner = {
								is_colonial_nation = no
								OR = {
									primary_culture = portugese
									primary_culture = brazilian
								}
							}
						}
					}
				}
				AND = {
					region = brazil_region
					NOT = {
						owner = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								region = brazil_region
								owner = {
									is_colonial_nation = no
									OR = {
										primary_culture = portugese
										primary_culture = brazilian
									}
								}
								value = 15
							}
						}
					}
					NOT = {
						AND = {
							country_or_non_sovereign_subject_holds = ROOT
							owner = {
								is_colonial_nation = no
								OR = {
									primary_culture = portugese
									primary_culture = brazilian
								}
							}
						}
					}
				}
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			# Lisboa:
			227 = {
				country_or_non_sovereign_subject_holds = ROOT
				owner = {
					is_colonial_nation = no
					OR = {
						primary_culture = portugese
						primary_culture = brazilian
					}
				}
			}
			# 5 owned provinces in Portugal areas:
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				OR = {
					area = beieras_area
					area = alentejo_area
				}
				owner = {
					is_colonial_nation = no
					OR = {
						primary_culture = portugese
						primary_culture = brazilian
					}
				}
				value = 5
			}
			# Rio de Janeiro:
			763 = {
				country_or_non_sovereign_subject_holds = ROOT
				owner = {
					is_colonial_nation = no
					OR = {
						primary_culture = portugese
						primary_culture = brazilian
					}
				}
			}
			# 15 owned provinces in Brazil region:
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				region = brazil_region
				owner = {
					is_colonial_nation = no
					OR = {
						primary_culture = portugese
						primary_culture = brazilian
					}
				}
				value = 15
			}
		}
		effect = {
			change_tag = POB
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			beieras_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = POB
			}
			alentejo_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = POB
			}
			brazil_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = POB
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = POB_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_portugal_brazil_flag
			set_country_flag = changed_from_colonial_nation
			set_country_flag = no_colonial_nations
			
			every_country = {
				limit = {
					is_subject_of = ROOT
					is_subject_other_than_tributary_trigger = yes
					OR = {
						primary_culture = portugese
						primary_culture = brazilian
					}
					capital_scope = {
						OR = {
							continent = europe
							continent = south_america
						}
					}
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_saudi_arabia = {
		major = yes
		potential = {
			culture_group = turko_semitic
			government = monarchy
			dynasty = "Sa'ud"
			NOT = { tag = ARB }
			NOT = { exists = SAU }
			NOT = { has_country_flag = formed_saudi_arabia_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 384	# Medina
				province_id = 385	# Mecca
				province_id = 392	# Riyadh
				province_id = 393	# Ha'il
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 384	# Medina
			owns_core_province = 385	# Mecca
			owns_core_province = 392	# Riyadh
			owns_core_province = 393	# Ha'il
		}
		effect = {
			change_tag = SAU
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = SAU_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_saudi_arabia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_durrani_empire = {
		major = yes
		potential = {
			primary_culture = afghani
			government = monarchy
			adm_tech = 65
			NOT = { exists = DRI }
			NOT = { has_country_flag = formed_durrani_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				area = balkh_area
				area = kabulistan_area
				area = ghor_area
				area = kalat_area
				area = sind_sagar_area
				area = lahore_area
				area = multan_area
				area = northern_sindh_area
				area = sindh_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			# Central Afghanistan:
			balkh_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			kabulistan_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			ghor_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			# Baluchistan/India:
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = kalat_area
					area = sind_sagar_area
					area = lahore_area
					area = multan_area
					area = northern_sindh_area
					area = sindh_area
				}
				value = 15
			}
		}
		effect = {
			change_tag = DRI
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			persia_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = DRI
			}
			khorasan_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = DRI
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = AFG_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_durrani_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_korean_empire = {
		major = yes
		potential = {
			primary_culture = korean
			government = monarchy
			adm_tech = 74
			NOT = { exists = JOE }
			NOT = { exists = KOE }
			NOT = { has_country_flag = formed_korean_empire_flag }
			
			country_formation_potential_trigger = yes
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			total_development = 250
		}
		effect = {
			change_tag = KOE
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = KOE_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_korean_empire_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_union_south_africa = {
		major = yes
		potential = {
			primary_culture = boer
			NOT = { exists = SAF }
			NOT = { exists = RSA }
			NOT = { has_country_flag = formed_south_africa_flag }
			
			colonial_country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 1177	# Cape
				province_id = 1181	# Natal
				province_id = 2856	# Highveld
				province_id = 4781	# Gauteng
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			# Capitals of Cape Colony, Natalia, OFS and Transvaal respectively
			owns_core_province = 1177	# Cape
			owns_core_province = 1181	# Natal
			owns_core_province = 2856	# Highveld
			owns_core_province = 4781	# Gauteng
		}
		effect = {
			change_tag = SAF
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = afrikaner_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_south_africa_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_republic_south_africa = {
		major = yes
		potential = {
			OR = {
				primary_culture = khoi
				primary_culture = tswana
				primary_culture = nguni
				primary_culture = zulu
				primary_culture = ndebele
				primary_culture = tsonga
				primary_culture = xhosa
				primary_culture = sotho
			}
			NOT = { exists = SAF }
			NOT = { exists = RSA }
			NOT = { has_country_flag = formed_south_africa_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 1177	# Cape
				province_id = 1180	# Xhosa
				province_id = 1181	# Natal
				province_id = 2880	# Griqualand
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 1177	# Cape
			owns_core_province = 1180	# Xhosa
			owns_core_province = 1181	# Natal
			owns_core_province = 2880	# Griqualand
		}
		effect = {
			change_tag = RSA
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = RSA_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_south_africa_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_east_africa = {
		major = yes
		potential = {
			OR = {
				tag = UGA
				tag = KEY
				tag = TNZ
				tag = RWA
				tag = BUU
			}
			NOT = { exists = EAF }
			NOT = { has_country_flag = formed_east_africa_flag }
			
			colonial_country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 4064	# Uganda
				province_id = 1273	# Nairobi
				province_id = 4058	# Dodoma
				province_id = 4067	# Rwanda
				province_id = 4070	# Burundi
			}
			NOT = { country_or_subject_holds = ROOT }
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_or_subject_of = 4064	# Uganda
			owns_or_subject_of = 1273	# Nairobi
			owns_or_subject_of = 4058	# Dodoma
			owns_or_subject_of = 4067	# Rwanda
			owns_or_subject_of = 4070	# Burundi
		}
		effect = {
			change_tag = EAF
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = EAF_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_east_africa_flag
			
			every_country = {
				limit = {
					OR = {
						tag = UGA
						tag = KEY
						tag = TNZ
						tag = RWA
						tag = BUU
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = etf_annexation.1 }
			}
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_transcaucasia = {
		major = yes
		potential = {
			OR = {
				culture_group = caucasian
				primary_culture = azerbaijani
			}
			NOT = { exists = TCC }
			NOT = { has_country_flag = formed_transcaucasia_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 423	# Tbilisi
				province_id = 419	# Yerevan
				province_id = 421	# Baku
				province_id = 422	# Imereti
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 423	# Tbilisi
			owns_core_province = 419	# Yerevan
			owns_core_province = 421	# Baku
			owns_core_province = 422	# Imereti
		}
		effect = {
			change_tag = TCC
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			caucasia_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = TCC
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = TCC_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_transcaucasia_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_iran = {
		major = yes
		potential = {
			tag = PER
			primary_culture = persian
			adm_tech = 82 # 1900-ish
			NOT = { exists = IRA }
			NOT = { has_country_flag = formed_iran_flag }
			
			country_formation_potential_trigger = {
				allow_end_game_tag = "always = yes"
			}
		}
		provinces_to_highlight = {
			is_core = ROOT
			NOT = { owned_by = ROOT }
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			if = {
				limit = {
					any_country = {
						is_civilized = yes
					}
				}
				is_civilized = yes
			}
			else = {
				adm_tech = 82
			}
		}
		effect = {
			change_tag = IRA
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = IRA_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_persia_flag
			set_country_flag = formed_iran_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_emirate_of_afghanistan = {
		major = yes
		potential = {
			OR = {
				tag = KAB
				tag = HRA
				tag = QAN
			}
			primary_culture = afghani
			religion_group = muslim
			NOT = { exists = AFG }
			NOT = { has_country_flag = formed_emirate_of_afghanistan_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						province_id = 446	# Herat
						province_id = 447	# Kandahar
						province_id = 451	# Kabul
					}
					OR = {
						NOT = { owned_by = ROOT }
						NOT = { is_core = ROOT }
					}
				}
				AND = {
					OR = {
						owned_by = KAB
						owned_by = HRA
						owned_by = QAN
					}
					NOT = { owned_by = ROOT }
				}
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 446	# Herat
			owns_core_province = 447	# Kandahar
			owns_core_province = 451	# Kabul
			if = {
				limit = {
					tag = KAB
				}
				NOT = { exists = HRA }
				NOT = { exists = QAN }
			}
			else_if = {
				limit = {
					tag = HRA
				}
				NOT = { exists = KAB }
				NOT = { exists = QAN }
			}
			else_if = {
				limit = {
					tag = QAN
				}
				NOT = { exists = KAB }
				NOT = { exists = HRA }
			}
		}
		effect = {
			tooltip = {
				override_country_name = AFGHANISTAN
			}
			hidden_effect = {
				restore_country_name_all = yes
				override_country_name_add_flag = {
					name = AFGHANISTAN
					definite = no
					special = yes
				}
			}
			if = {
				limit = {
					NOT = { government = monarchy }
				}
				change_government = monarchy
			}
			if = {
				limit = {
					NOT = { has_reform = iqta }
				}
				add_government_reform = iqta
			}
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			if = {
				limit = {
					any_province = {
						is_core = KAB
					}
					NOT = { tag = KAB }
				}
				KAB = { # Inherit Kabul's cores (Afghanistan + West Punjab)
					every_core_province = {
						hidden_effect = {
							remove_core = KAB
						}
						if = {
							limit = {
								NOT = { is_core = ROOT }
							}
							add_core = ROOT
						}
					}
				}
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_emirate_of_afghanistan_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_kingdom_of_afghanistan = {
		major = yes
		potential = {
			OR = {
				tag = KAB
				tag = HRA
				tag = QAN
			}
			primary_culture = afghani
			country_name_is = { name = AFGHANISTAN } # Has formed "the Emirate"
			NOT = { exists = AFG }
			NOT = { has_country_flag = formed_afghanistan_flag }
			
			country_formation_potential_trigger = yes
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			if = {
				limit = {
					any_country = {
						is_civilized = yes
					}
				}
				is_civilized = yes
			}
			else = {
				adm_tech = 81
			}
		}
		effect = {
			change_tag = AFG
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			if = {
				limit = {
					NOT = { government = monarchy }
				}
				change_government = monarchy
			}
			if = {
				limit = {
					has_reform = iqta
				}
				add_government_reform = muslim_kingdom_reform
			}
			hidden_effect = {
				if = {
					limit = {
						NOT = { exists = KAB }
					}
					KAB = {
						every_core_province = {
							remove_core = PREV
						}
					}
				}
				if = {
					limit = {
						NOT = { exists = HRA }
					}
					HRA = {
						every_core_province = {
							remove_core = PREV
						}
					}
				}
				if = {
					limit = {
						NOT = { exists = QAN }
					}
					QAN = {
						every_core_province = {
							remove_core = PREV
						}
					}
				}
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = AFG_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_afghanistan_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_ceylon = {
		major = yes
		potential = {
			OR = {
				primary_culture = sinhala
				AND = {
					primary_culture = tamil
					capital_scope = {
						OR = {
							area = lanka_area
							area = south_lanka_area
						}
					}
				}
			}
			NOT = {
				any_country = {
					country_name_is = { name = CEYLON }
				}
			}
			NOT = { exists = SRL }
			NOT = { has_country_flag = formed_ceylon_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				area = lanka_area
				area = south_lanka_area
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			lanka_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
			south_lanka_area = {
				type = all
				owned_by = ROOT
				is_core = ROOT
			}
		}
		effect = {
			tooltip = {
				override_country_name = CEYLON
			}
			hidden_effect = {
				restore_country_name_all = yes
				override_country_name_add_flag = {
					name = CEYLON
					definite = no
					special = yes
				}
			}
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_ceylon_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_patria_grande = {
		major = yes
		potential = {
			OR = {
				primary_culture = iberian_canadian
				primary_culture = iberian_east_american
				primary_culture = iberian_louisianan
				primary_culture = iberian_californian
				primary_culture = mexican
				primary_culture = iberian_caribbean
				primary_culture = iberian_colombian
				primary_culture = iberian_peruvian
				primary_culture = iberian_la_platan
				#primary_culture = brazilian
			}
			NOT = {
				any_country = {
					country_name_is = { name = PATRIA_GRANDE }
				}
			}
			NOT = { has_country_flag = formed_patria_grande_flag }
			
			colonial_country_formation_potential_trigger = {
				allow_end_game_tag = "always = yes"
			}
		}
		provinces_to_highlight = {
			OR = {
				province_id = 852 # Mexico
				province_id = 484 # Havana
				province_id = 839 # San Salvador
				province_id = 825 # Bogota
				province_id = 831 # Caracas
				province_id = 820 # Quito
				province_id = 809 # Lima
				province_id = 802 # La Paz
				province_id = 787 # Santiago
				province_id = 778 # Buenos Aires
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 852 # Mexico
			owns_core_province = 484 # Havana
			owns_core_province = 839 # San Salvador
			owns_core_province = 825 # Bogota
			owns_core_province = 831 # Caracas
			owns_core_province = 820 # Quito
			owns_core_province = 809 # Lima
			owns_core_province = 802 # La Paz
			owns_core_province = 787 # Santiago
			owns_core_province = 778 # Buenos Aires
		}
		effect = {
			tooltip = {
				override_country_name = PATRIA_GRANDE
			}
			hidden_effect = {
				restore_country_name_all = yes
				override_country_name_add_flag = {
					name = PATRIA_GRANDE
					definite = yes
					special = yes
				}
			}
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			central_america_superregion = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_america_superregion = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			andes_superregion = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_patria_grande_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

	form_sumatra = {
		major = yes
		potential = {
			culture_group = malay
			capital_scope = {
				OR = {
					area = north_sumatra_area
					area = batak_area
					area = central_sumatra_area
					area = jambi_area
					area = minangkabau_area
					area = south_sumatra_area
					area = rejang_area
				}
			}
			NOT = {
				any_country = {
					country_name_is = { name = SUMATRA }
				}
			}
			NOT = { tag = SRI }
			NOT = { tag = MLA }
			NOT = { tag = MSA }
			NOT = { tag = MAJ }
			NOT = { tag = IDN }
			NOT = { has_country_flag = formed_sumatra_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				area = north_sumatra_area
				area = batak_area
				area = central_sumatra_area
				area = jambi_area
				area = minangkabau_area
				area = south_sumatra_area
				area = rejang_area
			}
			ROOT = {
				NOT = {
					num_of_owned_provinces_with = {
						is_core = ROOT
						OR = {
							area = north_sumatra_area
							area = batak_area
							area = central_sumatra_area
							area = jambi_area
							area = minangkabau_area
							area = south_sumatra_area
							area = rejang_area
						}
						value = 20
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = north_sumatra_area
					area = batak_area
					area = central_sumatra_area
					area = jambi_area
					area = minangkabau_area
					area = south_sumatra_area
					area = rejang_area
				}
				value = 20
			}
		}
		effect = {
			tooltip = {
				override_country_name = SUMATRA
			}
			hidden_effect = {
				restore_country_name_all = yes
				override_country_name_add_flag = {
					name = SUMATRA
					definite = no
					special = yes
				}
			}
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			north_sumatra_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			batak_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			central_sumatra_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			jambi_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			minangkabau_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_sumatra_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			rejang_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_sumatra_flag
		}
		ai_will_do = {
			factor = 10
			modifier = { # Owns land across multiple islands:
				factor = 0
				num_of_owned_provinces_with = {
					NOT = {
						OR = {
							area = north_sumatra_area
							area = batak_area
							area = central_sumatra_area
							area = jambi_area
							area = minangkabau_area
							area = south_sumatra_area
							area = rejang_area
						}
					}
					value = 10
				}
			}
		}
		ai_importance = 400
	}

	form_java = {
		major = yes
		potential = {
			culture_group = malay
			capital_scope = {
				OR = {
					area = east_java_area
					area = surabaya_area
					area = central_java_area
					area = west_java_area
					area = banten_area
				}
			}
			NOT = {
				any_country = {
					country_name_is = { name = JAVA }
				}
			}
			NOT = { tag = SRI }
			NOT = { tag = MLA }
			NOT = { tag = MSA }
			NOT = { tag = MAJ }
			NOT = { tag = IDN }
			NOT = { has_country_flag = formed_java_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				area = east_java_area
				area = surabaya_area
				area = central_java_area
				area = west_java_area
				area = banten_area
			}
			ROOT = {
				NOT = {
					num_of_owned_provinces_with = {
						is_core = ROOT
						OR = {
							area = east_java_area
							area = surabaya_area
							area = central_java_area
							area = west_java_area
							area = banten_area
						}
						value = 15
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = east_java_area
					area = surabaya_area
					area = central_java_area
					area = west_java_area
					area = banten_area
				}
				value = 15
			}
		}
		effect = {
			tooltip = {
				override_country_name = JAVA
			}
			hidden_effect = {
				restore_country_name_all = yes
				override_country_name_add_flag = {
					name = JAVA
					definite = no
					special = yes
				}
			}
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			east_java_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			surabaya_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			central_java_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			west_java_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			banten_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_java_flag
		}
		ai_will_do = {
			factor = 10
			modifier = { # Owns land across multiple islands:
				factor = 0
				num_of_owned_provinces_with = {
					NOT = {
						OR = {
							area = east_java_area
							area = surabaya_area
							area = central_java_area
							area = west_java_area
							area = banten_area
						}
					}
					value = 8
				}
			}
			modifier = { # Form Mataram FIRST!
				factor = 0
				OR = {
					tag = SKT
					tag = YOG
				}
			}
		}
		ai_importance = 400
	}

	form_borneo = {
		major = yes
		potential = {
			OR = {
				culture_group = malay
				tag = LFA
			}
			capital_scope = {
				OR = {
					area = kutai_area
					area = berau_area
					area = sabah_area
					area = brunei_area
					area = kalimantan_area
					area = banjar_area
				}
			}
			NOT = {
				any_country = {
					OR = {
						country_name_is = { name = BORNEO }
						country_name_is = { name = BONI }
					}
				}
			}
			NOT = { tag = SRI }
			NOT = { tag = MLA }
			NOT = { tag = MSA }
			NOT = { tag = MAJ }
			NOT = { tag = IDN }
			NOT = { has_country_flag = formed_borneo_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				area = kutai_area
				area = berau_area
				area = sabah_area
				area = brunei_area
				area = kalimantan_area
				area = banjar_area
			}
			ROOT = {
				NOT = {
					num_of_owned_provinces_with = {
						is_core = ROOT
						OR = {
							area = kutai_area
							area = berau_area
							area = sabah_area
							area = brunei_area
							area = kalimantan_area
							area = banjar_area
						}
						value = 20
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = kutai_area
					area = berau_area
					area = sabah_area
					area = brunei_area
					area = kalimantan_area
					area = banjar_area
				}
				value = 20
			}
		}
		effect = {
			if = {
				limit = {
					tag = LFA
				}
				tooltip = {
					override_country_name = BONI
				}
				hidden_effect = {
					restore_country_name_all = yes
					override_country_name_add_flag = {
						name = BONI
						definite = no
						special = yes
					}
				}
			}
			else = {
				tooltip = {
					override_country_name = BORNEO
				}
				hidden_effect = {
					restore_country_name_all = yes
					override_country_name_add_flag = {
						name = BORNEO
						definite = no
						special = yes
					}
				}
			}
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			kutai_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			berau_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			sabah_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			brunei_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			kalimantan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			banjar_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_borneo_flag
		}
		ai_will_do = {
			factor = 10
			modifier = { # Owns land across multiple islands:
				factor = 0
				num_of_owned_provinces_with = {
					NOT = {
						OR = {
							area = kutai_area
							area = berau_area
							area = sabah_area
							area = brunei_area
							area = kalimantan_area
							area = banjar_area
						}
					}
					value = 10
				}
			}
		}
		ai_importance = 400
	}

	form_sulawesi = {
		major = yes
		potential = {
			culture_group = malay
			capital_scope = {
				OR = {
					area = makassar_area
					area = sulawesi_area
					area = south_sulawesi_area
				}
			}
			NOT = {
				any_country = {
					country_name_is = { name = SULAWESI }
				}
			}
			NOT = { tag = SRI }
			NOT = { tag = MLA }
			NOT = { tag = MSA }
			NOT = { tag = MAJ }
			NOT = { tag = IDN }
			NOT = { has_country_flag = formed_sulawesi_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				area = makassar_area
				area = sulawesi_area
				area = south_sulawesi_area
			}
			ROOT = {
				NOT = {
					num_of_owned_provinces_with = {
						is_core = ROOT
						OR = {
							area = makassar_area
							area = sulawesi_area
							area = south_sulawesi_area
						}
						value = 10
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = makassar_area
					area = sulawesi_area
					area = south_sulawesi_area
				}
				value = 10
			}
		}
		effect = {
			tooltip = {
				override_country_name = SULAWESI
			}
			hidden_effect = {
				restore_country_name_all = yes
				override_country_name_add_flag = {
					name = SULAWESI
					definite = no
					special = yes
				}
			}
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			makassar_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			sulawesi_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_sulawesi_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_sulawesi_flag
		}
		ai_will_do = {
			factor = 10
			modifier = { # Owns land across multiple islands:
				factor = 0
				num_of_owned_provinces_with = {
					NOT = {
						OR = {
							area = makassar_area
							area = sulawesi_area
							area = south_sulawesi_area
						}
					}
					value = 5
				}
			}
		}
		ai_importance = 400
	}

	form_mataram = {
		major = yes
		potential = {
			OR = {
				tag = SKT
				tag = YOG
			}
			NOT = { exists = MTR }
			NOT = { has_country_flag = formed_mataram_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 4793 # Surakarta
				province_id = 2690 # Yogyakarta
				owned_by = SKT
				owned_by = YOG
				AND = {
					OR = {
						area = east_java_area
						area = surabaya_area
						area = central_java_area
						area = west_java_area
						area = banten_area
					}
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								is_core = ROOT
								OR = {
									area = east_java_area
									area = surabaya_area
									area = central_java_area
									area = west_java_area
									area = banten_area
								}
								value = 5
							}
						}
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 4793 # Surakarta
			owns_core_province = 2690 # Yogyakarta
			if = {
				limit = {
					tag = SKT
				}
				NOT = { exists = YOG }
			}
			else_if = {
				limit = {
					tag = YOG
				}
				NOT = { exists = SKT }
			}
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = east_java_area
					area = surabaya_area
					area = central_java_area
					area = west_java_area
					area = banten_area
				}
				value = 5
			}
		}
		effect = {
			change_tag = MTR
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			east_java_area = {
				limit = {
					NOT = { is_core = ROOT }
				}
				add_core = MTR
			}
			surabaya_area = {
				limit = {
					NOT = { is_core = ROOT }
				}
				add_core = MTR
			}
			central_java_area = {
				limit = {
					NOT = { is_core = ROOT }
				}
				add_core = MTR
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			set_country_flag = formed_mataram_flag
		}
		ai_will_do = {
			factor = 100
		}
		ai_importance = 400
	}

	form_malaysia = {
		major = yes
		potential = {
			primary_culture = malayan
			NOT = { tag = SRI }
			NOT = { tag = MAJ }
			NOT = { tag = IDN }
			NOT = { exists = MLA }
			NOT = { has_country_flag = formed_malaysia_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 2392	# Selangor
				province_id = 597	# Johor
				province_id = 2393	# Terengganu
				AND = {
					OR = {
						province_id = 636	# Brunei
						province_id = 4804	# Kuching
					}
					ROOT = {
						NOT = { owns_core_province = 636 }
						NOT = { owns_core_province = 4804 }
					}
				}
				AND = {
					OR = {
						area = malaya_area
						area = johor_area
						area = malacca_area
						area = north_malaya_area
					}
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								is_core = ROOT
								OR = {
									area = malaya_area
									area = johor_area
									area = malacca_area
									area = north_malaya_area
								}
								value = 8
							}
						}
					}
				}
				AND = {
					OR = {
						area = kutai_area
						area = berau_area
						area = sabah_area
						area = brunei_area
						area = kalimantan_area
						area = banjar_area
					}
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								is_core = ROOT
								OR = {
									area = kutai_area
									area = berau_area
									area = sabah_area
									area = brunei_area
									area = kalimantan_area
									area = banjar_area
								}
								value = 5
							}
						}
					}
				}
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			adm_tech = 74
			owns_core_province = 2392	# Selangor
			owns_core_province = 597	# Johor
			owns_core_province = 2393	# Terengganu
			OR = {
				owns_core_province = 636	# Brunei
				owns_core_province = 4804	# Kuching
			}
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = malaya_area
					area = johor_area
					area = malacca_area
					area = north_malaya_area
				}
				value = 8
			}
			num_of_owned_provinces_with = {
				is_core = ROOT
				OR = {
					area = kutai_area
					area = berau_area
					area = sabah_area
					area = brunei_area
					area = kalimantan_area
					area = banjar_area
				}
				value = 5
			}
		}
		effect = {
			change_tag = MLA
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			malaya_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = MLA
			}
			johor_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = MLA
			}
			malacca_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = MLA
			}
			north_malaya_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = MLA
			}
			sabah_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = MLA
			}
			brunei_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = MLA
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			if = {
				limit = {
					has_custom_ideas = no
					NOT = { has_idea_group = MSA_ideas }
				}
				country_event = { id = ideagroups.1 }
			}
			set_country_flag = formed_malaysia_flag
		}
		ai_will_do = {
			factor = 100
		}
		ai_importance = 400
	}

	form_kazakh_horde = {
		major = yes
		potential = {
			primary_culture = khazak
			OR = {
				government = monarchy
				government = tribal
			}
			NOT = { exists = KZH }
			NOT = { has_country_flag = formed_kazakh_flag }
			
			country_formation_potential_trigger = yes
		}
		provinces_to_highlight = {
			OR = {
				province_id = 456
				province_id = 1969
				province_id = 2361
				province_id = 477
				province_id = 476
				province_id = 2360
				province_id = 2358
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		allow = {
			is_at_war = no
			is_free_or_tributary_trigger = yes
			owns_core_province = 456
			owns_core_province = 1969
			owns_core_province = 2361
			owns_core_province = 477
			owns_core_province = 476
			owns_core_province = 2360
			owns_core_province = 2358
		}
		effect = {
			change_tag = KZH
			on_change_tag_effect = yes
			if = {
				limit = {
					NOT = { government_rank = 2 }
				}
				set_government_rank = 2
			}
			custom_tooltip = form_kazakh_horde_tt
			hidden_effect = {
				BZH = {
					every_core_province = {
						add_core = KZH
					}
				}
				UZH = {
					every_core_province = {
						add_core = KZH
					}
				}
				OZH = {
					every_core_province = {
						add_core = KZH
					}
				}
				IZH = {
					every_core_province = {
						add_core = KZH
					}
				}
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			add_prestige = 25
			# if = {
				# limit = {
					# has_custom_ideas = no
					# NOT = { has_idea_group = KZK_ideas }
				# }
				# country_event = { id = ideagroups.1 }
			# }
			set_country_flag = formed_kazakh_flag
		}
		ai_will_do = {
			factor = 1
		}
		ai_importance = 400
	}

}