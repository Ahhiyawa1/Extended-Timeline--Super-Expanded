namespace = SM_pillar_of_independence_events
namespace = SM_world_merchant_organization_events
namespace = SM_center_of_diplomatic_studies_events
namespace = SM_heavenly_imperial_court_events
namespace = SM_march_military_institute_events
#Pillar of Independence
country_event = { #Choose province
	id = SM_pillar_of_independence_events.0
	title = SM_pillar_of_independence_events.spawn_title
	desc = SM_pillar_of_independence_events.spawn_desc
	picture = STREET_SPEECH_eventPicture
	is_triggered_only = yes
	major = yes
	major_trigger = {
		knows_country = ROOT
	}
	immediate = {
		hidden_effect = {
			set_country_flag = SM_spawn_event_open_flag
			every_owned_province = {
				limit = { SM_pillar_of_independence_province_triggers = yes }
				set_province_flag = SM_valid_province_flag
			}
			SM_set_spawn_target_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_1.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_spawn_target_1
				event_target:SM_spawn_target_1 = {
					NOT = { has_province_flag = SM_skip_target_flag }
				}
			}
		}
		goto = SM_spawn_target_1
		event_target:SM_spawn_target_1 = {
			SM_pillar_of_independence_spawn_province_effects = yes
		}
		SM_pillar_of_independence_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_2.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_2
			event_target:SM_spawn_target_2 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_2
		event_target:SM_spawn_target_2 = {
			SM_pillar_of_independence_spawn_province_effects = yes
		}
		SM_pillar_of_independence_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_3.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_3
			event_target:SM_spawn_target_3 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_3
		event_target:SM_spawn_target_3 = {
			SM_pillar_of_independence_spawn_province_effects = yes
		}
		SM_pillar_of_independence_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_4.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_4
			event_target:SM_spawn_target_4 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_4
		event_target:SM_spawn_target_4 = {
			SM_pillar_of_independence_spawn_province_effects = yes
		}
		SM_pillar_of_independence_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_5.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_5
			event_target:SM_spawn_target_5 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_5
		event_target:SM_spawn_target_5 = {
			SM_pillar_of_independence_spawn_province_effects = yes
		}
		SM_pillar_of_independence_spawn_country_effects = yes
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				SM_other_potential_province_exists_triggers = yes
			}
		}
		hidden_effect = {
			event_target:SM_spawn_target_1 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_2 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_3 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_4 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_5 = { set_province_flag = SM_skip_target_flag }
			country_event = {
				id = SM_pillar_of_independence_events.1
			}
		}
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				NOT = { SM_other_potential_province_exists_triggers = yes }
				calc_true_if = {
					all_owned_province = {
						SM_pillar_of_independence_province_triggers = yes
					}
					amount = 6
				}
			}
		}
		hidden_effect = {
			every_owned_province = {
				clr_province_flag = SM_skip_target_flag
			}
			country_event = {
				id = SM_pillar_of_independence_events.1
			}
		}
	}
	after = {
		every_owned_province = { 
			clr_province_flag = SM_skip_target_flag
			clr_province_flag = SM_valid_province_flag
		}
		clr_country_flag = SM_spawn_event_open_flag
	}
}
country_event = { #Choose province
	id = SM_pillar_of_independence_events.1
	title = SM_pillar_of_independence_events.spawn_title
	desc = SM_pillar_of_independence_events.spawn_desc
	picture = STREET_SPEECH_eventPicture
	is_triggered_only = yes
	major = yes
	major_trigger = {
		knows_country = ROOT
	}
	immediate = {
		hidden_effect = {
			set_country_flag = SM_spawn_event_open_flag
			every_owned_province = {
				limit = { SM_pillar_of_independence_province_triggers = yes }
				set_province_flag = SM_valid_province_flag
			}
			SM_set_spawn_target_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_1.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_spawn_target_1
				event_target:SM_spawn_target_1 = {
					NOT = { has_province_flag = SM_skip_target_flag }
				}
			}
		}
		goto = SM_spawn_target_1
		event_target:SM_spawn_target_1 = {
			SM_pillar_of_independence_spawn_province_effects = yes
		}
		SM_pillar_of_independence_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_2.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_2
			event_target:SM_spawn_target_2 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_2
		event_target:SM_spawn_target_2 = {
			SM_pillar_of_independence_spawn_province_effects = yes
		}
		SM_pillar_of_independence_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_3.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_3
			event_target:SM_spawn_target_3 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_3
		event_target:SM_spawn_target_3 = {
			SM_pillar_of_independence_spawn_province_effects = yes
		}
		SM_pillar_of_independence_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_4.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_4
			event_target:SM_spawn_target_4 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_4
		event_target:SM_spawn_target_4 = {
			SM_pillar_of_independence_spawn_province_effects = yes
		}
		SM_pillar_of_independence_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_5.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_5
			event_target:SM_spawn_target_5 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_5
		event_target:SM_spawn_target_5 = {
			SM_pillar_of_independence_spawn_province_effects = yes
		}
		SM_pillar_of_independence_spawn_country_effects = yes
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				SM_other_potential_province_exists_triggers = yes
			}
		}
		hidden_effect = {
			event_target:SM_spawn_target_1 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_2 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_3 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_4 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_5 = { set_province_flag = SM_skip_target_flag }
			country_event = {
				id = SM_pillar_of_independence_events.0
			}
		}
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				NOT = { SM_other_potential_province_exists_triggers = yes }
				calc_true_if = {
					all_owned_province = {
						SM_pillar_of_independence_province_triggers = yes
					}
					amount = 6
				}
			}
		}
		hidden_effect = {
			every_owned_province = {
				clr_province_flag = SM_skip_target_flag
			}
			country_event = {
				id = SM_pillar_of_independence_events.0
			}
		}
	}
	after = {
		every_owned_province = { 
			clr_province_flag = SM_skip_target_flag
			clr_province_flag = SM_valid_province_flag
		}
		clr_country_flag = SM_spawn_event_open_flag
	}
}
#World Merchant Organization
country_event = { #Choose province
	id = SM_world_merchant_organization_events.0
	title = SM_world_merchant_organization_events.spawn_title
	desc = SM_world_merchant_organization_events.spawn_desc
	picture = MERCHANTS_TALKING_eventPicture
	is_triggered_only = yes
	major = yes
	major_trigger = {
		knows_country = ROOT
	}
	immediate = {
		hidden_effect = {
			set_country_flag = SM_spawn_event_open_flag
			every_owned_province = {
				limit = { SM_world_merchant_organization_province_triggers = yes }
				set_province_flag = SM_valid_province_flag
			}
			SM_set_spawn_target_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_1.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_spawn_target_1
				event_target:SM_spawn_target_1 = {
					NOT = { has_province_flag = SM_skip_target_flag }
				}
			}
		}
		goto = SM_spawn_target_1
		event_target:SM_spawn_target_1 = {
			SM_world_merchant_organization_spawn_province_effects = yes
		}
		SM_world_merchant_organization_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_2.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_2
			event_target:SM_spawn_target_2 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_2
		event_target:SM_spawn_target_2 = {
			SM_world_merchant_organization_spawn_province_effects = yes
		}
		SM_world_merchant_organization_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_3.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_3
			event_target:SM_spawn_target_3 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_3
		event_target:SM_spawn_target_3 = {
			SM_world_merchant_organization_spawn_province_effects = yes
		}
		SM_world_merchant_organization_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_4.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_4
			event_target:SM_spawn_target_4 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_4
		event_target:SM_spawn_target_4 = {
			SM_world_merchant_organization_spawn_province_effects = yes
		}
		SM_world_merchant_organization_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_5.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_5
			event_target:SM_spawn_target_5 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_5
		event_target:SM_spawn_target_5 = {
			SM_world_merchant_organization_spawn_province_effects = yes
		}
		SM_world_merchant_organization_spawn_country_effects = yes
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				SM_other_potential_province_exists_triggers = yes
			}
		}
		hidden_effect = {
			event_target:SM_spawn_target_1 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_2 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_3 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_4 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_5 = { set_province_flag = SM_skip_target_flag }
			country_event = {
				id = SM_world_merchant_organization_events.1
			}
		}
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				NOT = { SM_other_potential_province_exists_triggers = yes }
				calc_true_if = {
					all_owned_province = {
						SM_world_merchant_organization_province_triggers = yes
					}
					amount = 6
				}
			}
		}
		hidden_effect = {
			every_owned_province = {
				clr_province_flag = SM_skip_target_flag
			}
			country_event = {
				id = SM_world_merchant_organization_events.1
			}
		}
	}
	after = {
		every_owned_province = { 
			clr_province_flag = SM_skip_target_flag
			clr_province_flag = SM_valid_province_flag
		}
		clr_country_flag = SM_spawn_event_open_flag
	}
}
country_event = { #Choose province
	id = SM_world_merchant_organization_events.1
	title = SM_world_merchant_organization_events.spawn_title
	desc = SM_world_merchant_organization_events.spawn_desc
	picture = MERCHANTS_TALKING_eventPicture
	is_triggered_only = yes
	major = yes
	major_trigger = {
		knows_country = ROOT
	}
	immediate = {
		hidden_effect = {
			set_country_flag = SM_spawn_event_open_flag
			every_owned_province = {
				limit = { SM_world_merchant_organization_province_triggers = yes }
				set_province_flag = SM_valid_province_flag
			}
			SM_set_spawn_target_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_1.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_spawn_target_1
				event_target:SM_spawn_target_1 = {
					NOT = { has_province_flag = SM_skip_target_flag }
				}
			}
		}
		goto = SM_spawn_target_1
		event_target:SM_spawn_target_1 = {
			SM_world_merchant_organization_spawn_province_effects = yes
		}
		SM_world_merchant_organization_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_2.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_2
			event_target:SM_spawn_target_2 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_2
		event_target:SM_spawn_target_2 = {
			SM_world_merchant_organization_spawn_province_effects = yes
		}
		SM_world_merchant_organization_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_3.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_3
			event_target:SM_spawn_target_3 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_3
		event_target:SM_spawn_target_3 = {
			SM_world_merchant_organization_spawn_province_effects = yes
		}
		SM_world_merchant_organization_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_4.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_4
			event_target:SM_spawn_target_4 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_4
		event_target:SM_spawn_target_4 = {
			SM_world_merchant_organization_spawn_province_effects = yes
		}
		SM_world_merchant_organization_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_5.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_5
			event_target:SM_spawn_target_5 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_5
		event_target:SM_spawn_target_5 = {
			SM_world_merchant_organization_spawn_province_effects = yes
		}
		SM_world_merchant_organization_spawn_country_effects = yes
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				SM_other_potential_province_exists_triggers = yes
			}
		}
		hidden_effect = {
			event_target:SM_spawn_target_1 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_2 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_3 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_4 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_5 = { set_province_flag = SM_skip_target_flag }
			country_event = {
				id = SM_world_merchant_organization_events.0
			}
		}
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				NOT = { SM_other_potential_province_exists_triggers = yes }
				calc_true_if = {
					all_owned_province = {
						SM_world_merchant_organization_province_triggers = yes
					}
					amount = 6
				}
			}
		}
		hidden_effect = {
			every_owned_province = {
				clr_province_flag = SM_skip_target_flag
			}
			country_event = {
				id = SM_world_merchant_organization_events.0
			}
		}
	}
	after = {
		every_owned_province = { 
			clr_province_flag = SM_skip_target_flag
			clr_province_flag = SM_valid_province_flag
		}
		clr_country_flag = SM_spawn_event_open_flag
	}
}
#Center of Diplomatic Studies
country_event = { #Choose province
	id = SM_center_of_diplomatic_studies_events.0
	title = SM_center_of_diplomatic_studies_events.spawn_title
	desc = SM_center_of_diplomatic_studies_events.spawn_desc
	picture = DIPLOMACY_SIGNING_eventPicture
	is_triggered_only = yes
	major = yes
	major_trigger = {
		knows_country = ROOT
	}
	immediate = {
		hidden_effect = {
			set_country_flag = SM_spawn_event_open_flag
			every_owned_province = {
				limit = { SM_center_of_diplomatic_studies_province_triggers = yes }
				set_province_flag = SM_valid_province_flag
			}
			SM_set_spawn_target_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_1.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_spawn_target_1
				event_target:SM_spawn_target_1 = {
					NOT = { has_province_flag = SM_skip_target_flag }
				}
			}
		}
		goto = SM_spawn_target_1
		event_target:SM_spawn_target_1 = {
			SM_center_of_diplomatic_studies_spawn_province_effects = yes
		}
		SM_center_of_diplomatic_studies_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_2.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_2
			event_target:SM_spawn_target_2 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_2
		event_target:SM_spawn_target_2 = {
			SM_center_of_diplomatic_studies_spawn_province_effects = yes
		}
		SM_center_of_diplomatic_studies_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_3.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_3
			event_target:SM_spawn_target_3 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_3
		event_target:SM_spawn_target_3 = {
			SM_center_of_diplomatic_studies_spawn_province_effects = yes
		}
		SM_center_of_diplomatic_studies_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_4.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_4
			event_target:SM_spawn_target_4 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_4
		event_target:SM_spawn_target_4 = {
			SM_center_of_diplomatic_studies_spawn_province_effects = yes
		}
		SM_center_of_diplomatic_studies_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_5.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_5
			event_target:SM_spawn_target_5 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_5
		event_target:SM_spawn_target_5 = {
			SM_center_of_diplomatic_studies_spawn_province_effects = yes
		}
		SM_center_of_diplomatic_studies_spawn_country_effects = yes
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				SM_other_potential_province_exists_triggers = yes
			}
		}
		hidden_effect = {
			event_target:SM_spawn_target_1 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_2 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_3 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_4 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_5 = { set_province_flag = SM_skip_target_flag }
			country_event = {
				id = SM_center_of_diplomatic_studies_events.1
			}
		}
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				NOT = { SM_other_potential_province_exists_triggers = yes }
				calc_true_if = {
					all_owned_province = {
						SM_center_of_diplomatic_studies_province_triggers = yes
					}
					amount = 6
				}
			}
		}
		hidden_effect = {
			every_owned_province = {
				clr_province_flag = SM_skip_target_flag
			}
			country_event = {
				id = SM_center_of_diplomatic_studies_events.1
			}
		}
	}
	after = {
		every_owned_province = { 
			clr_province_flag = SM_skip_target_flag
			clr_province_flag = SM_valid_province_flag
		}
		clr_country_flag = SM_spawn_event_open_flag
	}
}
country_event = { #Choose province
	id = SM_center_of_diplomatic_studies_events.1
	title = SM_center_of_diplomatic_studies_events.spawn_title
	desc = SM_center_of_diplomatic_studies_events.spawn_desc
	picture = DIPLOMACY_SIGNING_eventPicture
	is_triggered_only = yes
	major = yes
	major_trigger = {
		knows_country = ROOT
	}
	immediate = {
		hidden_effect = {
			set_country_flag = SM_spawn_event_open_flag
			every_owned_province = {
				limit = { SM_center_of_diplomatic_studies_province_triggers = yes }
				set_province_flag = SM_valid_province_flag
			}
			SM_set_spawn_target_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_1.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_spawn_target_1
				event_target:SM_spawn_target_1 = {
					NOT = { has_province_flag = SM_skip_target_flag }
				}
			}
		}
		goto = SM_spawn_target_1
		event_target:SM_spawn_target_1 = {
			SM_center_of_diplomatic_studies_spawn_province_effects = yes
		}
		SM_center_of_diplomatic_studies_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_2.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_2
			event_target:SM_spawn_target_2 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_2
		event_target:SM_spawn_target_2 = {
			SM_center_of_diplomatic_studies_spawn_province_effects = yes
		}
		SM_center_of_diplomatic_studies_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_3.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_3
			event_target:SM_spawn_target_3 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_3
		event_target:SM_spawn_target_3 = {
			SM_center_of_diplomatic_studies_spawn_province_effects = yes
		}
		SM_center_of_diplomatic_studies_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_4.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_4
			event_target:SM_spawn_target_4 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_4
		event_target:SM_spawn_target_4 = {
			SM_center_of_diplomatic_studies_spawn_province_effects = yes
		}
		SM_center_of_diplomatic_studies_spawn_country_effects = yes
	}
	option = {
		name = [SM_spawn_target_5.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_5
			event_target:SM_spawn_target_5 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_5
		event_target:SM_spawn_target_5 = {
			SM_center_of_diplomatic_studies_spawn_province_effects = yes
		}
		SM_center_of_diplomatic_studies_spawn_country_effects = yes
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				SM_other_potential_province_exists_triggers = yes
			}
		}
		hidden_effect = {
			event_target:SM_spawn_target_1 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_2 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_3 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_4 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_5 = { set_province_flag = SM_skip_target_flag }
			country_event = {
				id = SM_center_of_diplomatic_studies_events.0
			}
		}
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				NOT = { SM_other_potential_province_exists_triggers = yes }
				calc_true_if = {
					all_owned_province = {
						SM_center_of_diplomatic_studies_province_triggers = yes
					}
					amount = 6
				}
			}
		}
		hidden_effect = {
			every_owned_province = {
				clr_province_flag = SM_skip_target_flag
			}
			country_event = {
				id = SM_center_of_diplomatic_studies_events.0
			}
		}
	}
	after = {
		every_owned_province = { 
			clr_province_flag = SM_skip_target_flag
			clr_province_flag = SM_valid_province_flag
		}
		clr_country_flag = SM_spawn_event_open_flag
	}
}
#Heavenly Imperial Court
country_event = { #Spawn in capital
	id = SM_heavenly_imperial_court_events.0
	title = SM_heavenly_imperial_court_events.spawn_title
	desc = SM_heavenly_imperial_court_events.spawn_desc
	picture = IMPERIAL_SEAL_eventPicture
	is_triggered_only = yes
	major = yes
	major_trigger = {
		knows_country = ROOT
	}
	immediate = {
		hidden_effect = {
			set_country_flag = SM_spawn_event_open_flag
		}
	}
	option = {
		name = SM.wonderful_news
		ai_chance = {
			factor = 1
		}
		hidden_effect = { set_global_flag = SM_heavenly_imperial_court_spawned_global_flag }
		capital_scope = {
			add_great_project = {
				type = SM_heavenly_imperial_court
				instant = yes
			}
		}
		add_mandate = 3
	}
	after = {
		clr_country_flag = SM_spawn_event_open_flag
	}
}
#March Military Institute
country_event = { #Choose country
	id = SM_march_military_institute_events.0
	title = SM_march_military_institute_events.spawn_title
	desc = SM_march_military_institute_events.choose_subject_country
	picture = GREAT_BUILDING_eventPicture
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_country_flag = SM_spawn_event_open_flag
			random_subject_country = {
				limit = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { has_country_flag = SM_skip_target_flag }
				}
				save_event_target_as = SM_country_target_1
			}
			random_subject_country = {
				limit = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { tag = event_target:SM_country_target_1 }
					NOT = { has_country_flag = SM_skip_target_flag }
				}
				save_event_target_as = SM_country_target_2
			}
			random_subject_country = {
				limit = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { tag = event_target:SM_country_target_1 }
					NOT = { tag = event_target:SM_country_target_2 }
					NOT = { has_country_flag = SM_skip_target_flag }
				}
				save_event_target_as = SM_country_target_3
			}
			random_subject_country = {
				limit = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { tag = event_target:SM_country_target_1 }
					NOT = { tag = event_target:SM_country_target_2 }
					NOT = { tag = event_target:SM_country_target_3 }
					NOT = { has_country_flag = SM_skip_target_flag }
				}
				save_event_target_as = SM_country_target_4
			}
			random_subject_country = {
				limit = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { tag = event_target:SM_country_target_1 }
					NOT = { tag = event_target:SM_country_target_2 }
					NOT = { tag = event_target:SM_country_target_3 }
					NOT = { tag = event_target:SM_country_target_4 }
					NOT = { has_country_flag = SM_skip_target_flag }
				}
				save_event_target_as = SM_country_target_5
			}
		}
	}
	option = {
		name = [SM_country_target_1.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_country_target_1
				event_target:SM_country_target_1 = {
					NOT = { has_country_flag = SM_skip_target_flag }
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_1 = {
				save_event_target_as = SM_country_target
			}
		}
	}
	option = {
		name = [SM_country_target_2.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_country_target_2
				event_target:SM_country_target_2 = {
					NOT = { has_country_flag = SM_skip_target_flag }
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_2 = {
				save_event_target_as = SM_country_target
			}
		}
	}
	option = {
		name = [SM_country_target_3.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_country_target_3
				event_target:SM_country_target_3 = {
					NOT = { has_country_flag = SM_skip_target_flag }
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_3 = {
				save_event_target_as = SM_country_target
			}
		}
	}
	option = {
		name = [SM_country_target_4.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_country_target_4
				event_target:SM_country_target_4 = {
					NOT = { has_country_flag = SM_skip_target_flag }
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_3 = {
				save_event_target_as = SM_country_target
			}
		}
	}
	option = {
		name = [SM_country_target_5.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_country_target_5
				event_target:SM_country_target_5 = {
					NOT = { has_country_flag = SM_skip_target_flag }
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_3 = {
				save_event_target_as = SM_country_target
			}
		}
	}
	option = {
		name = SM.choose_other_country
		highlight = yes
		trigger = {
			hidden_trigger = {
				any_subject_country = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { has_country_flag = SM_skip_target_flag }
					NOT = {
						OR = {
							tag = event_target:SM_country_target_1
							tag = event_target:SM_country_target_2
							tag = event_target:SM_country_target_3
							tag = event_target:SM_country_target_4
							tag = event_target:SM_country_target_5
						}
					}
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_1 = { set_country_flag = SM_skip_target_flag }
			event_target:SM_country_target_2 = { set_country_flag = SM_skip_target_flag }
			event_target:SM_country_target_3 = { set_country_flag = SM_skip_target_flag }
			event_target:SM_country_target_4 = { set_country_flag = SM_skip_target_flag }
			event_target:SM_country_target_5 = { set_country_flag = SM_skip_target_flag }
		}
	}
	option = {
		name = SM.choose_other_country
		highlight = yes
		trigger = {
			hidden_trigger = {
				NOT = {
					any_subject_country = {
						SM_march_military_institute_subject_triggers = yes
						any_owned_province = { SM_march_military_institute_province_triggers = yes }
						NOT = { has_country_flag = SM_skip_target_flag }
						NOT = {
							OR = {
								tag = event_target:SM_country_target_1
								tag = event_target:SM_country_target_2
								tag = event_target:SM_country_target_3
								tag = event_target:SM_country_target_4
								tag = event_target:SM_country_target_5
							}
						}
					}
				}
				calc_true_if = {
					all_subject_country = {
						SM_march_military_institute_subject_triggers = yes
						any_owned_province = { SM_march_military_institute_province_triggers = yes }
					}
					amount = 6
				}
			}
		}
		hidden_effect = {
			every_subject_country = {
				clr_country_flag = SM_skip_target_flag
			}
		}
	}
	after = {
		if = {
			limit = { has_saved_event_target = SM_country_target }
			country_event = {
				id = SM_march_military_institute_events.2
			}
		}
		else = {
			country_event = {
				id = SM_march_military_institute_events.1
			}
		}
	}
}
country_event = { #Choose country
	id = SM_march_military_institute_events.1
	title = SM_march_military_institute_events.spawn_title
	desc = SM_march_military_institute_events.choose_subject_country
	picture = GREAT_BUILDING_eventPicture
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_country_flag = SM_spawn_event_open_flag
			random_subject_country = {
				limit = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { has_country_flag = SM_skip_target_flag }
				}
				save_event_target_as = SM_country_target_1
			}
			random_subject_country = {
				limit = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { tag = event_target:SM_country_target_1 }
					NOT = { has_country_flag = SM_skip_target_flag }
				}
				save_event_target_as = SM_country_target_2
			}
			random_subject_country = {
				limit = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { tag = event_target:SM_country_target_1 }
					NOT = { tag = event_target:SM_country_target_2 }
					NOT = { has_country_flag = SM_skip_target_flag }
				}
				save_event_target_as = SM_country_target_3
			}
			random_subject_country = {
				limit = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { tag = event_target:SM_country_target_1 }
					NOT = { tag = event_target:SM_country_target_2 }
					NOT = { tag = event_target:SM_country_target_3 }
					NOT = { has_country_flag = SM_skip_target_flag }
				}
				save_event_target_as = SM_country_target_4
			}
			random_subject_country = {
				limit = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { tag = event_target:SM_country_target_1 }
					NOT = { tag = event_target:SM_country_target_2 }
					NOT = { tag = event_target:SM_country_target_3 }
					NOT = { tag = event_target:SM_country_target_4 }
					NOT = { has_country_flag = SM_skip_target_flag }
				}
				save_event_target_as = SM_country_target_5
			}
		}
	}
	option = {
		name = [SM_country_target_1.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_country_target_1
				event_target:SM_country_target_1 = {
					NOT = { has_country_flag = SM_skip_target_flag }
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_1 = {
				save_event_target_as = SM_country_target
			}
		}
	}
	option = {
		name = [SM_country_target_2.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_country_target_2
				event_target:SM_country_target_2 = {
					NOT = { has_country_flag = SM_skip_target_flag }
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_2 = {
				save_event_target_as = SM_country_target
			}
		}
	}
	option = {
		name = [SM_country_target_3.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_country_target_3
				event_target:SM_country_target_3 = {
					NOT = { has_country_flag = SM_skip_target_flag }
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_3 = {
				save_event_target_as = SM_country_target
			}
		}
	}
	option = {
		name = [SM_country_target_4.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_country_target_4
				event_target:SM_country_target_4 = {
					NOT = { has_country_flag = SM_skip_target_flag }
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_3 = {
				save_event_target_as = SM_country_target
			}
		}
	}
	option = {
		name = [SM_country_target_5.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_country_target_5
				event_target:SM_country_target_5 = {
					NOT = { has_country_flag = SM_skip_target_flag }
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_3 = {
				save_event_target_as = SM_country_target
			}
		}
	}
	option = {
		name = SM.choose_other_country
		highlight = yes
		trigger = {
			hidden_trigger = {
				any_subject_country = {
					SM_march_military_institute_subject_triggers = yes
					any_owned_province = { SM_march_military_institute_province_triggers = yes }
					NOT = { has_country_flag = SM_skip_target_flag }
					NOT = {
						OR = {
							tag = event_target:SM_country_target_1
							tag = event_target:SM_country_target_2
							tag = event_target:SM_country_target_3
							tag = event_target:SM_country_target_4
							tag = event_target:SM_country_target_5
						}
					}
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target_1 = { set_country_flag = SM_skip_target_flag }
			event_target:SM_country_target_2 = { set_country_flag = SM_skip_target_flag }
			event_target:SM_country_target_3 = { set_country_flag = SM_skip_target_flag }
			event_target:SM_country_target_4 = { set_country_flag = SM_skip_target_flag }
			event_target:SM_country_target_5 = { set_country_flag = SM_skip_target_flag }
		}
	}
	option = {
		name = SM.choose_other_country
		highlight = yes
		trigger = {
			hidden_trigger = {
				NOT = {
					any_subject_country = {
						SM_march_military_institute_subject_triggers = yes
						any_owned_province = { SM_march_military_institute_province_triggers = yes }
						NOT = { has_country_flag = SM_skip_target_flag }
						NOT = {
							OR = {
								tag = event_target:SM_country_target_1
								tag = event_target:SM_country_target_2
								tag = event_target:SM_country_target_3
								tag = event_target:SM_country_target_4
								tag = event_target:SM_country_target_5
							}
						}
					}
				}
				calc_true_if = {
					all_subject_country = {
						SM_march_military_institute_subject_triggers = yes
						any_owned_province = { SM_march_military_institute_province_triggers = yes }
					}
					amount = 6
				}
			}
		}
		hidden_effect = {
			every_subject_country = {
				clr_country_flag = SM_skip_target_flag
			}
		}
	}
	after = {
		if = {
			limit = { has_saved_event_target = SM_country_target }
			country_event = {
				id = SM_march_military_institute_events.2
			}
		}
		else = {
			country_event = {
				id = SM_march_military_institute_events.0
			}
		}
	}
}
country_event = { #Choose province
	id = SM_march_military_institute_events.2
	title = SM_march_military_institute_events.spawn_title
	desc = SM_march_military_institute_events.spawn_desc
	picture = GREAT_BUILDING_eventPicture
	is_triggered_only = yes
	major = yes
	major_trigger = {
		knows_country = ROOT
	}
	immediate = {
		hidden_effect = {
			set_country_flag = SM_spawn_event_open_flag
			if = {
				limit = {
					NOT = {	has_saved_event_target = SM_country_target }
				}
				random_subject_country = {
					limit = { 
						SM_march_military_institute_subject_triggers = yes
						any_owned_province = { SM_march_military_institute_province_triggers = yes }
					}
					save_event_target_as = SM_country_target
				}
			}
			event_target:SM_country_target = {
				every_owned_province = {
					limit = { SM_march_military_institute_province_triggers = yes }
					set_province_flag = SM_valid_province_flag
				}
				SM_set_spawn_target_effects = yes
			}
		}
	}
	option = {
		name = [SM_spawn_target_1.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_spawn_target_1
				event_target:SM_spawn_target_1 = {
					NOT = { has_province_flag = SM_skip_target_flag }
				}
			}
		}
		goto = SM_spawn_target_1
		add_historical_friend = event_target:SM_country_target
		hidden_effect = {
			event_target:SM_country_target = {
				add_historical_friend = ROOT
			}
		}
		event_target:SM_spawn_target_1 = {
			SM_march_military_institute_spawn_province_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_2.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_2
			event_target:SM_spawn_target_2 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_2
		add_historical_friend = event_target:SM_country_target
		hidden_effect = {
			event_target:SM_country_target = {
				add_historical_friend = ROOT
			}
		}
		event_target:SM_spawn_target_2 = {
			SM_march_military_institute_spawn_province_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_3.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_3
			event_target:SM_spawn_target_3 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_3
		add_historical_friend = event_target:SM_country_target
		hidden_effect = {
			event_target:SM_country_target = {
				add_historical_friend = ROOT
			}
		}
		event_target:SM_spawn_target_3 = {
			SM_march_military_institute_spawn_province_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_4.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_4
			event_target:SM_spawn_target_4 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_4
		add_historical_friend = event_target:SM_country_target
		hidden_effect = {
			event_target:SM_country_target = {
				add_historical_friend = ROOT
			}
		}
		event_target:SM_spawn_target_4 = {
			SM_march_military_institute_spawn_province_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_5.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_5
			event_target:SM_spawn_target_5 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_5
		add_historical_friend = event_target:SM_country_target
		hidden_effect = {
			event_target:SM_country_target = {
				add_historical_friend = ROOT
			}
		}
		event_target:SM_spawn_target_5 = {
			SM_march_military_institute_spawn_province_effects = yes
		}
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				event_target:SM_country_target = {
					SM_other_potential_province_exists_triggers = yes
				}
			}
		}
		hidden_effect = {
			event_target:SM_spawn_target_1 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_2 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_3 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_4 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_5 = { set_province_flag = SM_skip_target_flag }
			country_event = {
				id = SM_march_military_institute_events.3
			}
		}
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				event_target:SM_country_target = {
					NOT = { SM_other_potential_province_exists_triggers = yes }
					calc_true_if = {
						all_owned_province = {
							SM_march_military_institute_province_triggers = yes
						}
						amount = 6
					}
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target = {
				every_owned_province = {
					clr_province_flag = SM_skip_target_flag
				}
			}
			country_event = {
				id = SM_march_military_institute_events.3
			}
		}
	}
	after = {
		event_target:SM_country_target = {
			every_owned_province = {
				clr_province_flag = SM_skip_target_flag
				clr_province_flag = SM_valid_province_flag
			}
		}
		clr_country_flag = SM_spawn_event_open_flag
	}
}
country_event = { #Choose province
	id = SM_march_military_institute_events.3
	title = SM_march_military_institute_events.spawn_title
	desc = SM_march_military_institute_events.spawn_desc
	picture = GREAT_BUILDING_eventPicture
	is_triggered_only = yes
	major = yes
	major_trigger = {
		knows_country = ROOT
	}
	immediate = {
		hidden_effect = {
			set_country_flag = SM_spawn_event_open_flag
			if = {
				limit = {
					NOT = {	has_saved_event_target = SM_country_target }
				}
				random_subject_country = {
					limit = { 
						SM_march_military_institute_subject_triggers = yes
						any_owned_province = { SM_march_military_institute_province_triggers = yes }
					}
					save_event_target_as = SM_country_target
				}
			}
			event_target:SM_country_target = {
				every_owned_province = {
					limit = { SM_march_military_institute_province_triggers = yes }
					set_province_flag = SM_valid_province_flag
				}
				SM_set_spawn_target_effects = yes
			}
		}
	}
	option = {
		name = [SM_spawn_target_1.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			hidden_trigger = {
				has_saved_event_target = SM_spawn_target_1
				event_target:SM_spawn_target_1 = {
					NOT = { has_province_flag = SM_skip_target_flag }
				}
			}
		}
		goto = SM_spawn_target_1
		add_historical_friend = event_target:SM_country_target
		hidden_effect = {
			event_target:SM_country_target = {
				add_historical_friend = ROOT
			}
		}
		event_target:SM_spawn_target_1 = {
			SM_march_military_institute_spawn_province_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_2.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_2
			event_target:SM_spawn_target_2 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_2
		add_historical_friend = event_target:SM_country_target
		hidden_effect = {
			event_target:SM_country_target = {
				add_historical_friend = ROOT
			}
		}
		event_target:SM_spawn_target_2 = {
			SM_march_military_institute_spawn_province_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_3.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_3
			event_target:SM_spawn_target_3 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_3
		add_historical_friend = event_target:SM_country_target
		hidden_effect = {
			event_target:SM_country_target = {
				add_historical_friend = ROOT
			}
		}
		event_target:SM_spawn_target_3 = {
			SM_march_military_institute_spawn_province_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_4.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_4
			event_target:SM_spawn_target_4 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_4
		add_historical_friend = event_target:SM_country_target
		hidden_effect = {
			event_target:SM_country_target = {
				add_historical_friend = ROOT
			}
		}
		event_target:SM_spawn_target_4 = {
			SM_march_military_institute_spawn_province_effects = yes
		}
	}
	option = {
		name = [SM_spawn_target_5.GetName]
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_saved_event_target = SM_spawn_target_5
			event_target:SM_spawn_target_5 = {
				NOT = { has_province_flag = SM_skip_target_flag }
			}
		}
		goto = SM_spawn_target_5
		add_historical_friend = event_target:SM_country_target
		hidden_effect = {
			event_target:SM_country_target = {
				add_historical_friend = ROOT
			}
		}
		event_target:SM_spawn_target_5 = {
			SM_march_military_institute_spawn_province_effects = yes
		}
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				event_target:SM_country_target = {
					SM_other_potential_province_exists_triggers = yes
				}
			}
		}
		hidden_effect = {
			event_target:SM_spawn_target_1 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_2 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_3 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_4 = { set_province_flag = SM_skip_target_flag }
			event_target:SM_spawn_target_5 = { set_province_flag = SM_skip_target_flag }
			country_event = {
				id = SM_march_military_institute_events.2
			}
		}
	}
	option = {
		name = SM.choose_other_province
		highlight = yes
		trigger = {
			hidden_trigger = {
				event_target:SM_country_target = {
					NOT = { SM_other_potential_province_exists_triggers = yes }
					calc_true_if = {
						all_owned_province = {
							SM_march_military_institute_province_triggers = yes
						}
						amount = 6
					}
				}
			}
		}
		hidden_effect = {
			event_target:SM_country_target = {
				every_owned_province = {
					clr_province_flag = SM_skip_target_flag
				}
			}
			country_event = {
				id = SM_march_military_institute_events.2
			}
		}
	}
	after = {
		event_target:SM_country_target = {
			every_owned_province = {
				clr_province_flag = SM_skip_target_flag
				clr_province_flag = SM_valid_province_flag
			}
		}
		clr_country_flag = SM_spawn_event_open_flag
	}
}